import{Q as ji}from"./QPage.c812233f.js";import{c as He,L as Tn,M as Pr,O as Wr,P as Xr,R as En,S as Zi,T as $n,U as Ji,a as q,V as eo,g as it,h as T,W as zt,X as to,Y as no,Z as xe,$ as ro,a0 as io,r as X,a1 as Jt,m as oo,d as Mn,a2 as ao,a3 as vt,f as we,a4 as ir,w as se,o as lo,e as bt,a5 as so,l as pn,a6 as or,a7 as uo,y as co,a8 as fo,a9 as ho,t as mo,aa as vo,ab as go,ac as po,ad as _o,ae as yo,af as wo,ag as xo,ah as bo,ai as So,aj as ar,u as ko,ak as Co,al as qo,am as Ao,an as Vo,ao as To,n as Eo,ap as $o,aq as Mo,ar as Ro,as as No,at as Io,au as Lo,av as lr,aw as ut,ax as Fo,ay as zo,az as Ho,aA as Ye,aB as Oo,aC as Rn,B as Bo,C as en,_ as tn,E as qe,F as Nn,G as fe,H as P,aD as Dt,J as Ae,aE as dt,aF as Do,aG as Ur,aH as gt,aI as Kr,Q as pt,aJ as Gr,aK as Po,aL as Wo,I as sr,aM as ur,aN as cr,aO as Xo,aP as Uo,aQ as Ko,aR as Go,D as _n}from"./index.99503300.js";import{a as Qo}from"./axios.703e2798.js";var Yo={value:()=>{}};function Qr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ht(n)}function Ht(e){this._=e}function jo(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ht.prototype=Qr.prototype={constructor:Ht,on:function(e,t){var n=this._,r=jo(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=Zo(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=fr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=fr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ht(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Zo(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function fr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Yo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yn="http://www.w3.org/1999/xhtml",dr={svg:"http://www.w3.org/2000/svg",xhtml:yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),dr.hasOwnProperty(t)?{space:dr[t],local:e}:e}function Jo(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yn&&t.documentElement.namespaceURI===yn?t.createElement(e):t.createElementNS(n,e)}}function ea(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function In(e){var t=nn(e);return(t.local?ea:Jo)(t)}function ta(){}function Ln(e){return e==null?ta:function(){return this.querySelector(e)}}function na(e){typeof e!="function"&&(e=Ln(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=new Array(l),a,u,c=0;c<l;++c)(a=o[c])&&(u=e.call(a,a.__data__,c,o))&&("__data__"in a&&(u.__data__=a.__data__),s[c]=u);return new ie(r,this._parents)}function Yr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ra(){return[]}function jr(e){return e==null?ra:function(){return this.querySelectorAll(e)}}function ia(e){return function(){return Yr(e.apply(this,arguments))}}function oa(e){typeof e=="function"?e=ia(e):e=jr(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],s=l.length,a,u=0;u<s;++u)(a=l[u])&&(r.push(e.call(a,a.__data__,u,l)),i.push(a));return new ie(r,i)}function Zr(e){return function(){return this.matches(e)}}function Jr(e){return function(t){return t.matches(e)}}var aa=Array.prototype.find;function la(e){return function(){return aa.call(this.children,e)}}function sa(){return this.firstElementChild}function ua(e){return this.select(e==null?sa:la(typeof e=="function"?e:Jr(e)))}var ca=Array.prototype.filter;function fa(){return Array.from(this.children)}function da(e){return function(){return ca.call(this.children,e)}}function ha(e){return this.selectAll(e==null?fa:da(typeof e=="function"?e:Jr(e)))}function ma(e){typeof e!="function"&&(e=Zr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=[],a,u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new ie(r,this._parents)}function ei(e){return new Array(e.length)}function va(){return new ie(this._enter||this._groups.map(ei),this._parents)}function Pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pt.prototype={constructor:Pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ga(e){return function(){return e}}function pa(e,t,n,r,i,o){for(var l=0,s,a=t.length,u=o.length;l<u;++l)(s=t[l])?(s.__data__=o[l],r[l]=s):n[l]=new Pt(e,o[l]);for(;l<a;++l)(s=t[l])&&(i[l]=s)}function _a(e,t,n,r,i,o,l){var s,a,u=new Map,c=t.length,f=o.length,m=new Array(c),d;for(s=0;s<c;++s)(a=t[s])&&(m[s]=d=l.call(a,a.__data__,s,t)+"",u.has(d)?i[s]=a:u.set(d,a));for(s=0;s<f;++s)d=l.call(e,o[s],s,o)+"",(a=u.get(d))?(r[s]=a,a.__data__=o[s],u.delete(d)):n[s]=new Pt(e,o[s]);for(s=0;s<c;++s)(a=t[s])&&u.get(m[s])===a&&(i[s]=a)}function ya(e){return e.__data__}function wa(e,t){if(!arguments.length)return Array.from(this,ya);var n=t?_a:pa,r=this._parents,i=this._groups;typeof e!="function"&&(e=ga(e));for(var o=i.length,l=new Array(o),s=new Array(o),a=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],m=f.length,d=xa(e.call(c,c&&c.__data__,u,r)),v=d.length,k=s[u]=new Array(v),y=l[u]=new Array(v),I=a[u]=new Array(m);n(c,f,k,y,I,d,t);for(var F=0,S=0,w,C;F<v;++F)if(w=k[F]){for(F>=S&&(S=F+1);!(C=y[S])&&++S<v;);w._next=C||null}}return l=new ie(l,r),l._enter=s,l._exit=a,l}function xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ba(){return new ie(this._exit||this._groups.map(ei),this._parents)}function Sa(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ka(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),s=new Array(i),a=0;a<l;++a)for(var u=n[a],c=r[a],f=u.length,m=s[a]=new Array(f),d,v=0;v<f;++v)(d=u[v]||c[v])&&(m[v]=d);for(;a<i;++a)s[a]=n[a];return new ie(s,this._parents)}function Ca(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function qa(e){e||(e=Aa);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],s=l.length,a=i[o]=new Array(s),u,c=0;c<s;++c)(u=l[c])&&(a[c]=u);a.sort(t)}return new ie(i,this._parents).order()}function Aa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Va(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ta(){return Array.from(this)}function Ea(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function $a(){let e=0;for(const t of this)++e;return e}function Ma(){return!this.node()}function Ra(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,s;o<l;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function Na(e){return function(){this.removeAttribute(e)}}function Ia(e){return function(){this.removeAttributeNS(e.space,e.local)}}function La(e,t){return function(){this.setAttribute(e,t)}}function Fa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function za(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ha(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Oa(e,t){var n=nn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ia:Na:typeof t=="function"?n.local?Ha:za:n.local?Fa:La)(n,t))}function ti(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ba(e){return function(){this.style.removeProperty(e)}}function Da(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pa(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Wa(e,t,n){return arguments.length>1?this.each((t==null?Ba:typeof t=="function"?Pa:Da)(e,t,n==null?"":n)):nt(this.node(),e)}function nt(e,t){return e.style.getPropertyValue(t)||ti(e).getComputedStyle(e,null).getPropertyValue(t)}function Xa(e){return function(){delete this[e]}}function Ua(e,t){return function(){this[e]=t}}function Ka(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ga(e,t){return arguments.length>1?this.each((t==null?Xa:typeof t=="function"?Ka:Ua)(e,t)):this.node()[e]}function ni(e){return e.trim().split(/^|\s+/)}function Fn(e){return e.classList||new ri(e)}function ri(e){this._node=e,this._names=ni(e.getAttribute("class")||"")}ri.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ii(e,t){for(var n=Fn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function oi(e,t){for(var n=Fn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Qa(e){return function(){ii(this,e)}}function Ya(e){return function(){oi(this,e)}}function ja(e,t){return function(){(t.apply(this,arguments)?ii:oi)(this,e)}}function Za(e,t){var n=ni(e+"");if(arguments.length<2){for(var r=Fn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ja:t?Qa:Ya)(n,t))}function Ja(){this.textContent=""}function el(e){return function(){this.textContent=e}}function tl(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function nl(e){return arguments.length?this.each(e==null?Ja:(typeof e=="function"?tl:el)(e)):this.node().textContent}function rl(){this.innerHTML=""}function il(e){return function(){this.innerHTML=e}}function ol(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function al(e){return arguments.length?this.each(e==null?rl:(typeof e=="function"?ol:il)(e)):this.node().innerHTML}function ll(){this.nextSibling&&this.parentNode.appendChild(this)}function sl(){return this.each(ll)}function ul(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cl(){return this.each(ul)}function fl(e){var t=typeof e=="function"?e:In(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dl(){return null}function hl(e,t){var n=typeof e=="function"?e:In(e),r=t==null?dl:typeof t=="function"?t:Ln(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ml(){var e=this.parentNode;e&&e.removeChild(this)}function vl(){return this.each(ml)}function gl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _l(e){return this.select(e?pl:gl)}function yl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wl(e){return function(t){e.call(this,t,this.__data__)}}function xl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function bl(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Sl(e,t,n){return function(){var r=this.__on,i,o=wl(t);if(r){for(var l=0,s=r.length;l<s;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function kl(e,t,n){var r=xl(e+""),i,o=r.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,u=s.length,c;a<u;++a)for(i=0,c=s[a];i<o;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(s=t?Sl:bl,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function ai(e,t,n){var r=ti(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Cl(e,t){return function(){return ai(this,e,t)}}function ql(e,t){return function(){return ai(this,e,t.apply(this,arguments))}}function Al(e,t){return this.each((typeof t=="function"?ql:Cl)(e,t))}function*Vl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var zn=[null];function ie(e,t){this._groups=e,this._parents=t}function St(){return new ie([[document.documentElement]],zn)}function Tl(){return this}ie.prototype=St.prototype={constructor:ie,select:na,selectAll:oa,selectChild:ua,selectChildren:ha,filter:ma,data:wa,enter:va,exit:ba,join:Sa,merge:ka,selection:Tl,order:Ca,sort:qa,call:Va,nodes:Ta,node:Ea,size:$a,empty:Ma,each:Ra,attr:Oa,style:Wa,property:Ga,classed:Za,text:nl,html:al,raise:sl,lower:cl,append:fl,insert:hl,remove:vl,clone:_l,datum:yl,on:kl,dispatch:Al,[Symbol.iterator]:Vl};function W(e){return typeof e=="string"?new ie([[document.querySelector(e)]],[document.documentElement]):new ie([[e]],zn)}function El(e){return W(In(e).call(document.documentElement))}function hr(e){return typeof e=="string"?new ie([document.querySelectorAll(e)],[document.documentElement]):new ie([Yr(e)],zn)}function Hn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function li(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kt(){}var yt=.7,Wt=1/yt,Je="\\s*([+-]?\\d+)\\s*",wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$l=/^#([0-9a-f]{3,8})$/,Ml=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),Rl=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),Nl=new RegExp(`^rgba\\(${Je},${Je},${Je},${wt}\\)$`),Il=new RegExp(`^rgba\\(${pe},${pe},${pe},${wt}\\)$`),Ll=new RegExp(`^hsl\\(${wt},${pe},${pe}\\)$`),Fl=new RegExp(`^hsla\\(${wt},${pe},${pe},${wt}\\)$`),mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(kt,be,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vr,formatHex:vr,formatHex8:zl,formatHsl:Hl,formatRgb:gr,toString:gr});function vr(){return this.rgb().formatHex()}function zl(){return this.rgb().formatHex8()}function Hl(){return si(this).formatHsl()}function gr(){return this.rgb().formatRgb()}function be(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pr(t):n===3?new oe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Et(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ml.exec(e))?new oe(t[1],t[2],t[3],1):(t=Rl.exec(e))?new oe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nl.exec(e))?Et(t[1],t[2],t[3],t[4]):(t=Il.exec(e))?Et(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ll.exec(e))?wr(t[1],t[2]/100,t[3]/100,1):(t=Fl.exec(e))?wr(t[1],t[2]/100,t[3]/100,t[4]):mr.hasOwnProperty(e)?pr(mr[e]):e==="transparent"?new oe(NaN,NaN,NaN,0):null}function pr(e){return new oe(e>>16&255,e>>8&255,e&255,1)}function Et(e,t,n,r){return r<=0&&(e=t=n=NaN),new oe(e,t,n,r)}function Ol(e){return e instanceof kt||(e=be(e)),e?(e=e.rgb(),new oe(e.r,e.g,e.b,e.opacity)):new oe}function wn(e,t,n,r){return arguments.length===1?Ol(e):new oe(e,t,n,r==null?1:r)}function oe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hn(oe,wn,li(kt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yt:Math.pow(yt,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oe(Le(this.r),Le(this.g),Le(this.b),Xt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatHex8:Bl,formatRgb:yr,toString:yr}));function _r(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function Bl(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function yr(){const e=Xt(this.opacity);return`${e===1?"rgb(":"rgba("}${Le(this.r)}, ${Le(this.g)}, ${Le(this.b)}${e===1?")":`, ${e})`}`}function Xt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Le(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Le(e),(e<16?"0":"")+e.toString(16)}function wr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new de(e,t,n,r)}function si(e){if(e instanceof de)return new de(e.h,e.s,e.l,e.opacity);if(e instanceof kt||(e=be(e)),!e)return new de;if(e instanceof de)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,s=o-i,a=(o+i)/2;return s?(t===o?l=(n-r)/s+(n<r)*6:n===o?l=(r-t)/s+2:l=(t-n)/s+4,s/=a<.5?o+i:2-o-i,l*=60):s=a>0&&a<1?0:l,new de(l,s,a,e.opacity)}function Dl(e,t,n,r){return arguments.length===1?si(e):new de(e,t,n,r==null?1:r)}function de(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hn(de,Dl,li(kt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new de(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yt:Math.pow(yt,e),new de(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new oe(cn(e>=240?e-240:e+120,i,r),cn(e,i,r),cn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new de(xr(this.h),$t(this.s),$t(this.l),Xt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xt(this.opacity);return`${e===1?"hsl(":"hsla("}${xr(this.h)}, ${$t(this.s)*100}%, ${$t(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xr(e){return e=(e||0)%360,e<0?e+360:e}function $t(e){return Math.max(0,Math.min(1,e||0))}function cn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var ui=e=>()=>e;function Pl(e,t){return function(n){return e+n*t}}function Wl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Xl(e){return(e=+e)==1?ci:function(t,n){return n-t?Wl(t,n,e):ui(isNaN(t)?n:t)}}function ci(e,t){var n=t-e;return n?Pl(e,n):ui(isNaN(e)?t:e)}var br=function e(t){var n=Xl(t);function r(i,o){var l=n((i=wn(i)).r,(o=wn(o)).r),s=n(i.g,o.g),a=n(i.b,o.b),u=ci(i.opacity,o.opacity);return function(c){return i.r=l(c),i.g=s(c),i.b=a(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Ce(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(xn.source,"g");function Ul(e){return function(){return e}}function Kl(e){return function(t){return e(t)+""}}function Gl(e,t){var n=xn.lastIndex=fn.lastIndex=0,r,i,o,l=-1,s=[],a=[];for(e=e+"",t=t+"";(r=xn.exec(e))&&(i=fn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[l]?s[l]+=o:s[++l]=o),(r=r[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,a.push({i:l,x:Ce(r,i)})),n=fn.lastIndex;return n<t.length&&(o=t.slice(n),s[l]?s[l]+=o:s[++l]=o),s.length<2?a[0]?Kl(a[0].x):Ul(t):(t=a.length,function(u){for(var c=0,f;c<t;++c)s[(f=a[c]).i]=f.x(u);return s.join("")})}var Sr=180/Math.PI,bn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fi(e,t,n,r,i,o){var l,s,a;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,a/=s),e*r<t*n&&(e=-e,t=-t,a=-a,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Sr,skewX:Math.atan(a)*Sr,scaleX:l,scaleY:s}}var Mt;function Ql(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bn:fi(t.a,t.b,t.c,t.d,t.e,t.f)}function Yl(e){return e==null||(Mt||(Mt=document.createElementNS("http://www.w3.org/2000/svg","g")),Mt.setAttribute("transform",e),!(e=Mt.transform.baseVal.consolidate()))?bn:(e=e.matrix,fi(e.a,e.b,e.c,e.d,e.e,e.f))}function di(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,m,d,v){if(u!==f||c!==m){var k=d.push("translate(",null,t,null,n);v.push({i:k-4,x:Ce(u,f)},{i:k-2,x:Ce(c,m)})}else(f||m)&&d.push("translate("+f+t+m+n)}function l(u,c,f,m){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),m.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ce(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,m){u!==c?m.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ce(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function a(u,c,f,m,d,v){if(u!==f||c!==m){var k=d.push(i(d)+"scale(",null,",",null,")");v.push({i:k-4,x:Ce(u,f)},{i:k-2,x:Ce(c,m)})}else(f!==1||m!==1)&&d.push(i(d)+"scale("+f+","+m+")")}return function(u,c){var f=[],m=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,m),l(u.rotate,c.rotate,f,m),s(u.skewX,c.skewX,f,m),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,m),u=c=null,function(d){for(var v=-1,k=m.length,y;++v<k;)f[(y=m[v]).i]=y.x(d);return f.join("")}}}var jl=di(Ql,"px, ","px)","deg)"),Zl=di(Yl,", ",")",")"),rt=0,ht=0,ct=0,hi=1e3,Ut,mt,Kt=0,ze=0,rn=0,xt=typeof performance=="object"&&performance.now?performance:Date,mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function On(){return ze||(mi(Jl),ze=xt.now()+rn)}function Jl(){ze=0}function Gt(){this._call=this._time=this._next=null}Gt.prototype=vi.prototype={constructor:Gt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?On():+n)+(t==null?0:+t),!this._next&&mt!==this&&(mt?mt._next=this:Ut=this,mt=this),this._call=e,this._time=n,Sn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sn())}};function vi(e,t,n){var r=new Gt;return r.restart(e,t,n),r}function es(){On(),++rt;for(var e=Ut,t;e;)(t=ze-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rt}function kr(){ze=(Kt=xt.now())+rn,rt=ht=0;try{es()}finally{rt=0,ns(),ze=0}}function ts(){var e=xt.now(),t=e-Kt;t>hi&&(rn-=t,Kt=e)}function ns(){for(var e,t=Ut,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ut=n);mt=e,Sn(r)}function Sn(e){if(!rt){ht&&(ht=clearTimeout(ht));var t=e-ze;t>24?(e<1/0&&(ht=setTimeout(kr,e-xt.now()-rn)),ct&&(ct=clearInterval(ct))):(ct||(Kt=xt.now(),ct=setInterval(ts,hi)),rt=1,mi(kr))}}function Cr(e,t,n){var r=new Gt;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var rs=Qr("start","end","cancel","interrupt"),is=[],gi=0,qr=1,kn=2,Ot=3,Ar=4,Cn=5,Bt=6;function on(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;os(e,n,{name:t,index:r,group:i,on:rs,tween:is,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gi})}function Bn(e,t){var n=he(e,t);if(n.state>gi)throw new Error("too late; already scheduled");return n}function _e(e,t){var n=he(e,t);if(n.state>Ot)throw new Error("too late; already running");return n}function he(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function os(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=vi(o,0,n.time);function o(u){n.state=qr,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,f,m,d;if(n.state!==qr)return a();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Ot)return Cr(l);d.state===Ar?(d.state=Bt,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Bt,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(Cr(function(){n.state===Ot&&(n.state=Ar,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=kn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kn){for(n.state=Ot,i=new Array(m=n.tween.length),c=0,f=-1;c<m;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Cn,1),f=-1,m=i.length;++f<m;)i[f].call(e,c);n.state===Cn&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Bt,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function as(e,t){var n=e.__transition,r,i,o=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>kn&&r.state<Cn,r.state=Bt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function ls(e){return this.each(function(){as(this,e)})}function ss(e,t){var n,r;return function(){var i=_e(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,s=r.length;l<s;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function us(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=_e(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var s={name:t,value:n},a=0,u=i.length;a<u;++a)if(i[a].name===t){i[a]=s;break}a===u&&i.push(s)}o.tween=i}}function cs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=he(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?ss:us)(n,e,t))}function Dn(e,t,n){var r=e._id;return e.each(function(){var i=_e(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return he(i,r).value[t]}}function pi(e,t){var n;return(typeof t=="number"?Ce:t instanceof be?br:(n=be(t))?(t=n,br):Gl)(e,t)}function fs(e){return function(){this.removeAttribute(e)}}function ds(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hs(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function ms(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function vs(e,t,n){var r,i,o;return function(){var l,s=n(this),a;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),a=s+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s)))}}function gs(e,t,n){var r,i,o;return function(){var l,s=n(this),a;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),a=s+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s)))}}function ps(e,t){var n=nn(e),r=n==="transform"?Zl:pi;return this.attrTween(e,typeof t=="function"?(n.local?gs:vs)(n,r,Dn(this,"attr."+e,t)):t==null?(n.local?ds:fs)(n):(n.local?ms:hs)(n,r,t))}function _s(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ys(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ws(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ys(e,o)),n}return i._value=t,i}function xs(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&_s(e,o)),n}return i._value=t,i}function bs(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=nn(e);return this.tween(n,(r.local?ws:xs)(r,t))}function Ss(e,t){return function(){Bn(this,e).delay=+t.apply(this,arguments)}}function ks(e,t){return t=+t,function(){Bn(this,e).delay=t}}function Cs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ss:ks)(t,e)):he(this.node(),t).delay}function qs(e,t){return function(){_e(this,e).duration=+t.apply(this,arguments)}}function As(e,t){return t=+t,function(){_e(this,e).duration=t}}function Vs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qs:As)(t,e)):he(this.node(),t).duration}function Ts(e,t){if(typeof t!="function")throw new Error;return function(){_e(this,e).ease=t}}function Es(e){var t=this._id;return arguments.length?this.each(Ts(t,e)):he(this.node(),t).ease}function $s(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_e(this,e).ease=n}}function Ms(e){if(typeof e!="function")throw new Error;return this.each($s(this._id,e))}function Rs(e){typeof e!="function"&&(e=Zr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=[],a,u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new Se(r,this._parents,this._name,this._id)}function Ns(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),s=0;s<o;++s)for(var a=t[s],u=n[s],c=a.length,f=l[s]=new Array(c),m,d=0;d<c;++d)(m=a[d]||u[d])&&(f[d]=m);for(;s<r;++s)l[s]=t[s];return new Se(l,this._parents,this._name,this._id)}function Is(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ls(e,t,n){var r,i,o=Is(t)?Bn:_e;return function(){var l=o(this,e),s=l.on;s!==r&&(i=(r=s).copy()).on(t,n),l.on=i}}function Fs(e,t){var n=this._id;return arguments.length<2?he(this.node(),n).on.on(e):this.each(Ls(n,e,t))}function zs(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hs(){return this.on("end.remove",zs(this._id))}function Os(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ln(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var s=r[l],a=s.length,u=o[l]=new Array(a),c,f,m=0;m<a;++m)(c=s[m])&&(f=e.call(c,c.__data__,m,s))&&("__data__"in c&&(f.__data__=c.__data__),u[m]=f,on(u[m],t,n,m,u,he(c,n)));return new Se(o,this._parents,t,n)}function Bs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jr(e));for(var r=this._groups,i=r.length,o=[],l=[],s=0;s<i;++s)for(var a=r[s],u=a.length,c,f=0;f<u;++f)if(c=a[f]){for(var m=e.call(c,c.__data__,f,a),d,v=he(c,n),k=0,y=m.length;k<y;++k)(d=m[k])&&on(d,t,n,k,m,v);o.push(m),l.push(c)}return new Se(o,l,t,n)}var Ds=St.prototype.constructor;function Ps(){return new Ds(this._groups,this._parents)}function Ws(e,t){var n,r,i;return function(){var o=nt(this,e),l=(this.style.removeProperty(e),nt(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function _i(e){return function(){this.style.removeProperty(e)}}function Xs(e,t,n){var r,i=n+"",o;return function(){var l=nt(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function Us(e,t,n){var r,i,o;return function(){var l=nt(this,e),s=n(this),a=s+"";return s==null&&(a=s=(this.style.removeProperty(e),nt(this,e))),l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s))}}function Ks(e,t){var n,r,i,o="style."+t,l="end."+o,s;return function(){var a=_e(this,e),u=a.on,c=a.value[o]==null?s||(s=_i(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(l,i=c),a.on=r}}function Gs(e,t,n){var r=(e+="")=="transform"?jl:pi;return t==null?this.styleTween(e,Ws(e,r)).on("end.style."+e,_i(e)):typeof t=="function"?this.styleTween(e,Us(e,r,Dn(this,"style."+e,t))).each(Ks(this._id,e)):this.styleTween(e,Xs(e,r,t),n).on("end.style."+e,null)}function Qs(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ys(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Qs(e,l,n)),r}return o._value=t,o}function js(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ys(e,t,n==null?"":n))}function Zs(e){return function(){this.textContent=e}}function Js(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function eu(e){return this.tween("text",typeof e=="function"?Js(Dn(this,"text",e)):Zs(e==null?"":e+""))}function tu(e){return function(t){this.textContent=e.call(this,t)}}function nu(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&tu(i)),t}return r._value=e,r}function ru(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nu(e))}function iu(){for(var e=this._name,t=this._id,n=yi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,a,u=0;u<s;++u)if(a=l[u]){var c=he(a,t);on(a,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Se(r,this._parents,e,n)}function ou(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var s={value:l},a={value:function(){--i===0&&o()}};n.each(function(){var u=_e(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(a)),u.on=t}),i===0&&o()})}var au=0;function Se(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function yi(){return++au}var ye=St.prototype;Se.prototype={constructor:Se,select:Os,selectAll:Bs,selectChild:ye.selectChild,selectChildren:ye.selectChildren,filter:Rs,merge:Ns,selection:Ps,transition:iu,call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:Fs,attr:ps,attrTween:bs,style:Gs,styleTween:js,text:eu,textTween:ru,remove:Hs,tween:cs,delay:Cs,duration:Vs,ease:Es,easeVarying:Ms,end:ou,[Symbol.iterator]:ye[Symbol.iterator]};function lu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var su={time:null,delay:0,duration:250,ease:lu};function uu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cu(e){var t,n;e instanceof Se?(t=e._id,e=e._name):(t=yi(),(n=su).time=On(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,a,u=0;u<s;++u)(a=l[u])&&on(a,e,t,u,l,n||uu(a,t));return new Se(r,this._parents,e,t)}St.prototype.interrupt=ls;St.prototype.transition=cu;function Ze(e,t,n){this.k=e,this.x=t,this.y=n}Ze.prototype={constructor:Ze,scale:function(e){return e===1?this:new Ze(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ze(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Ze(1,0,0);Ze.prototype;var Oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},wi={exports:{}};(function(e){(function(t,n,r){function i(a){var u=this,c=s();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(a),u.s0<0&&(u.s0+=1),u.s1-=c(a),u.s1<0&&(u.s1+=1),u.s2-=c(a),u.s2<0&&(u.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function l(a,u){var c=new i(a),f=u&&u.state,m=c.next;return m.int32=function(){return c.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,f&&(typeof f=="object"&&o(f,c),m.state=function(){return o(c,{})}),m}function s(){var a=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){a+=c.charCodeAt(f);var m=.02519603282416938*a;a=m>>>0,m-=a,m*=a,a=m>>>0,m-=a,a+=m*4294967296}return(a>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.alea=l})(Oe,e,!1)})(wi);var xi={exports:{}};(function(e){(function(t,n,r){function i(s){var a=this,u="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var f=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^f^f>>>8},s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function l(s,a){var u=new i(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,d=(u.next()>>>0)/4294967296,v=(m+d)/(1<<21);while(v===0);return v},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.xor128=l})(Oe,e,!1)})(xi);var bi={exports:{}};(function(e){(function(t,n,r){function i(s){var a=this,u="";a.next=function(){var f=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(f^f<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,c==u.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function l(s,a){var u=new i(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,d=(u.next()>>>0)/4294967296,v=(m+d)/(1<<21);while(v===0);return v},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.xorwow=l})(Oe,e,!1)})(bi);var Si={exports:{}};(function(e){(function(t,n,r){function i(s){var a=this;a.next=function(){var c=a.x,f=a.i,m,d;return m=c[f],m^=m>>>7,d=m^m<<24,m=c[f+1&7],d^=m^m>>>10,m=c[f+3&7],d^=m^m>>>3,m=c[f+4&7],d^=m^m<<7,m=c[f+7&7],m=m^m<<13,d^=m^m<<9,c[f]=d,a.i=f+1&7,d};function u(c,f){var m,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,m=0;m<f.length;++m)d[m&7]=d[m&7]<<15^f.charCodeAt(m)+d[m+1&7]<<13;for(;d.length<8;)d.push(0);for(m=0;m<8&&d[m]===0;++m);for(m==8?d[7]=-1:d[m],c.x=d,c.i=0,m=256;m>0;--m)c.next()}u(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function l(s,a){s==null&&(s=+new Date);var u=new i(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,d=(u.next()>>>0)/4294967296,v=(m+d)/(1<<21);while(v===0);return v},f.int32=u.next,f.quick=f,c&&(c.x&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.xorshift7=l})(Oe,e,!1)})(Si);var ki={exports:{}};(function(e){(function(t,n,r){function i(s){var a=this;a.next=function(){var c=a.w,f=a.X,m=a.i,d,v;return a.w=c=c+1640531527|0,v=f[m+34&127],d=f[m=m+1&127],v^=v<<13,d^=d<<17,v^=v>>>15,d^=d>>>12,v=f[m]=v^d,a.i=m,v+(c^c>>>16)|0};function u(c,f){var m,d,v,k,y,I=[],F=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,F=Math.max(F,f.length)),v=0,k=-32;k<F;++k)f&&(d^=f.charCodeAt((k+32)%f.length)),k===0&&(y=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,k>=0&&(y=y+1640531527|0,m=I[k&127]^=d+y,v=m==0?v+1:0);for(v>=128&&(I[(f&&f.length||0)&127]=-1),v=127,k=4*128;k>0;--k)d=I[v+34&127],m=I[v=v+1&127],d^=d<<13,m^=m<<17,d^=d>>>15,m^=m>>>12,I[v]=d^m;c.w=y,c.X=I,c.i=v}u(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function l(s,a){s==null&&(s=+new Date);var u=new i(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,d=(u.next()>>>0)/4294967296,v=(m+d)/(1<<21);while(v===0);return v},f.int32=u.next,f.quick=f,c&&(c.X&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.xor4096=l})(Oe,e,!1)})(ki);var Ci={exports:{}};(function(e){(function(t,n,r){function i(s){var a=this,u="";a.next=function(){var f=a.b,m=a.c,d=a.d,v=a.a;return f=f<<25^f>>>7^m,m=m-d|0,d=d<<24^d>>>8^v,v=v-f|0,a.b=f=f<<20^f>>>12^m,a.c=m=m-d|0,a.d=d<<16^m>>>16^v,a.a=v-f|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)a.b^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function l(s,a){var u=new i(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,d=(u.next()>>>0)/4294967296,v=(m+d)/(1<<21);while(v===0);return v},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=l:r&&r.amd?r(function(){return l}):this.tychei=l})(Oe,e,!1)})(Ci);var qi={exports:{}};(function(e){(function(t,n,r){var i=256,o=6,l=52,s="random",a=r.pow(i,o),u=r.pow(2,l),c=u*2,f=i-1,m;function d(w,C,M){var E=[];C=C==!0?{entropy:!0}:C||{};var R=I(y(C.entropy?[w,S(n)]:w==null?F():w,3),E),z=new v(E),U=function(){for(var j=z.g(o),D=a,Z=0;j<u;)j=(j+Z)*i,D*=i,Z=z.g(1);for(;j>=c;)j/=2,D/=2,Z>>>=1;return(j+Z)/D};return U.int32=function(){return z.g(4)|0},U.quick=function(){return z.g(4)/4294967296},U.double=U,I(S(z.S),n),(C.pass||M||function(j,D,Z,ne){return ne&&(ne.S&&k(ne,z),j.state=function(){return k(z,{})}),Z?(r[s]=j,D):j})(U,R,"global"in C?C.global:this==r,C.state)}function v(w){var C,M=w.length,E=this,R=0,z=E.i=E.j=0,U=E.S=[];for(M||(w=[M++]);R<i;)U[R]=R++;for(R=0;R<i;R++)U[R]=U[z=f&z+w[R%M]+(C=U[R])],U[z]=C;(E.g=function(j){for(var D,Z=0,ne=E.i,ae=E.j,ee=E.S;j--;)D=ee[ne=f&ne+1],Z=Z*i+ee[f&(ee[ne]=ee[ae=f&ae+D])+(ee[ae]=D)];return E.i=ne,E.j=ae,Z})(i)}function k(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function y(w,C){var M=[],E=typeof w,R;if(C&&E=="object")for(R in w)try{M.push(y(w[R],C-1))}catch{}return M.length?M:E=="string"?w:w+"\0"}function I(w,C){for(var M=w+"",E,R=0;R<M.length;)C[f&R]=f&(E^=C[f&R]*19)+M.charCodeAt(R++);return S(C)}function F(){try{var w;return m&&(w=m.randomBytes)?w=w(i):(w=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(w)),S(w)}catch{var C=t.navigator,M=C&&C.plugins;return[+new Date,t,M,t.screen,S(n)]}}function S(w){return String.fromCharCode.apply(0,w)}if(I(r.random(),n),e.exports){e.exports=d;try{m=require("crypto")}catch{}}else r["seed"+s]=d})(typeof self!="undefined"?self:Oe,[],Math)})(qi);var fu=wi.exports,du=xi.exports,hu=bi.exports,mu=Si.exports,vu=ki.exports,gu=Ci.exports,Be=qi.exports;Be.alea=fu;Be.xor128=du;Be.xorwow=hu;Be.xorshift7=mu;Be.xor4096=vu;Be.tychei=gu;var pu=Be;const _u="l0";function yu(){const e="\u0905\u69A3\u1288\u285A\u9A31\u3886\u3CAE\u4C1F\uE71C\u3FDF\uB36F\u72DB\uE03C\u882B\u98FB",t="\u9C63\u5398\uA37E\uF0BF\u164B\uC096\uCBC5\u18B6\u5725\u5061\u3236\u4F0D\u8B9E\u8275\u724B";var n=window.location.hostname,r=t;n===_u[0]+"sohlaco".split("").reverse().join("")+"t"&&(r=e);for(var i=new pu(n+"someblah"),o="",l=0;l<r.length;l++){const s=Math.floor(i()*65535);o+=String.fromCharCode(r.charCodeAt(l)-s)}return o.split(",")}const Rt=yu();var A={players:{1:{id:"1",colour:"#6699ff",token_colour:"blue",name:"Player 1",bottom_text:!0,start_square:"l0",last_square:Rt[0]},2:{id:"2",colour:"#ff9999",token_colour:"red",name:"Player 2",bottom_text:!1,start_square:"l13",last_square:Rt[1]},3:{id:"3",colour:"#99ff99",token_colour:"green",name:"Player 3",bottom_text:!1,start_square:"l26",last_square:Rt[2]},4:{id:"4",colour:"#ffff99",token_colour:"yellow",name:"Player 4",bottom_text:!0,start_square:"l39",last_square:Rt[3]}},safe_squares:[8,21,34,47],number_of_dice_images:12,blank_dice_image_num:12,position_strings:["1st","2nd","3rd","4th"]};function wu(e,t,n,r,i="cylinder"){const o=e.append("g").attr("id",n).attr("transform",r).attr("pointer-events","none"),l=40,s=30;switch(i){case"cylinder":{o.append("path").attr("d",`
          M ${-l},-10
          A ${l},${s} 0 0 1 ${l},-10
          L ${l},10
          A ${l},${s} 0 0 1 ${-l},10
          Z
        `).attr("fill",be(t).darker(.5)).attr("stroke","black").attr("stroke-width",1),o.append("ellipse").attr("rx",l).attr("ry",s).attr("cx",0).attr("cy",10).attr("fill",be(t).darker(.8)).attr("stroke","black"),o.append("ellipse").attr("rx",l).attr("ry",s).attr("cx",0).attr("cy",-10).attr("fill",t).attr("stroke","black");break}case"gem":{const a=[[0,-40],[28,-28],[40,0],[28,28],[0,40],[-28,28],[-40,0],[-28,-28]].map(u=>u.join(",")).join(" ");o.append("polygon").attr("points",a).attr("fill",t).attr("stroke","black").attr("stroke-width",1);break}case"pawn":{o.append("ellipse").attr("rx",25).attr("ry",35).attr("cy",-10).attr("fill",t).attr("stroke","black"),o.append("circle").attr("r",15).attr("cy",-50).attr("fill",be(t).darker(2.9)).attr("stroke","black");break}case"coin":{o.append("circle").attr("r",40).attr("fill",t).attr("stroke","black"),o.append("text").attr("text-anchor","middle").attr("dy","0.35em").attr("font-size","24px").attr("fill","white").text("\u2605");break}case"stacked":{for(let u=0;u<3;u++)o.append("ellipse").attr("rx",40).attr("ry",15).attr("cy",u*-5).attr("fill",be(t).darker(u*.3)).attr("stroke","black");break}default:console.warn(`Unknown token style: ${i}`)}}var xu={draw_token:wu};function bu(e){if(e.startsWith("l"))return Ai(parseInt(e.substring(1)));if(e.startsWith("p")){if(e[2]==="s"){const t=e.substring(1).split("s")[0],n=parseInt(e.substring(1).split("s")[1]);return Cu(t,n)}if(e[2]==="f"){const t=e.substring(1).split("f")[0],n=parseInt(e.substring(1).split("f")[1]);return qu(t,n)}if(e[2]==="e"){const t=e.substring(1).split("e")[0],n=parseInt(e.substring(1).split("e")[1]);return Au(t,n)}}return console.log("ERROR - unrecognised space id",e),[0,0]}function Su(e,t,n){if(n===2)return t===0?[e[0]-25,e[1]]:[e[0]+25,e[1]];if(n===3)return t===0?[e[0]-25,e[1]]:t===1?[e[0]+25,e[1]]:[e[0],e[1]+25];if(n===4)return t===0?[e[0]-25,e[1]-10]:t===1?[e[0]+25,e[1]-10]:t===2?[e[0]-25,e[1]+20]:[e[0]+25,e[1]+20];if(n===5)return t===0?[e[0]-25,e[1]-10]:t===1?[e[0]+25,e[1]-10]:t===2?[e[0]-25,e[1]+20]:t===3?[e[0]+25,e[1]+20]:[e[0],e[1]];if(n===6)return t===0?[e[0]-25,e[1]-10]:t===1?[e[0]+25,e[1]-10]:t===2?[e[0]-25,e[1]+20]:t===3?[e[0]+25,e[1]+20]:t===4?[e[0],e[1]-10]:[e[0],e[1]+20];function r(i=-10,o=25){return Math.floor(Math.random()*(o-i+1))+i}return[e[0]+r(-25,25),e[1]+r(-10,25)]}function ku(e){return"translate("+e[0].toString()+","+e[1].toString()+")"}function Cu(e,t){var n=0,r=0;return[1,3].includes(t)&&(r=200),[2,3].includes(t)&&(n=200),e==="1"?[n-550,r+350]:e==="2"?[n-550,r-550]:e==="3"?[n+350,r-550]:[n+350,r+350]}function qu(e,t){return e==="1"?[0,(4-t)*100+200]:e==="2"?[-1*((4-t)*100)-200,0]:e==="3"?[0,-1*((4-t)*100+200)]:[(4-t)*100+200,0]}function Au(e,t){return e==="1"?[t*50-75,110]:e==="3"?[t*50-75,-110]:e==="2"?[-110,t*50-75]:[110,t*50-75]}function Ai(e){var t=-150,n=650;return e<5?n=150+100*(4-e):e<11?(n=50,t=100*(10-e)-750):e<12?(n=-50,t=-750):e<18?(n=-150,t=100*e-1950):e<24?(n=100*(24-e)-850,t=-150):e<25?(n=-750,t=-50):e<31?(t=50,n=100*(e-31)-150):e<37?(t=750+(e-37)*100,n=-150):e<38?(n=-50,t=650):e<44?(n=50,t=50+(44-e)*100):e<50?(n=750+(e-50)*100,t=50):e<51&&(n=650,t=-50),[t+50,n+50]}var J={get_square_coords_from_id:bu,coords_to_translate:ku,get_circle_square_coords:Ai,adjust_square_coords_for_slot:Su};function Vu(e,t,n){e.append("g"),e.append("rect").attr("width",1500).attr("height",1500).attr("x",-750).attr("y",-750).attr("style","fill: lightgrey;stroke-width:5;stroke:rgb(0,0,0)"),Nt(e,-750,150,A.players[1],t,n),Nt(e,-750,-750,A.players[2],t,n),Nt(e,150,-750,A.players[3],t,n),Nt(e,150,150,A.players[4],t,n),Tu(e);const r=30;It(e,A.players[1],"rotate(0)",t,44,r),It(e,A.players[2],"rotate(90)",t,5,r),It(e,A.players[3],"rotate(180)",t,18,r),It(e,A.players[4],"rotate(270)",t,31,r),$u(e),Lt(e,A.players[1],t,n),Lt(e,A.players[2],t,n),Lt(e,A.players[3],t,n),Lt(e,A.players[4],t,n),Mu(e),Ft(e,-750,150,A.players[1],n),Ft(e,-750,-750,A.players[2],n),Ft(e,150,-750,A.players[3],n),Ft(e,150,150,A.players[4],n)}function Nt(e,t,n,r,i,o){e.append("rect").attr("width",600).attr("height",600).attr("x",t).attr("y",n).attr("style","fill: "+r.colour+";stroke-width:1;stroke:rgb(0,0,0)"),e.append("rect").attr("width",500).attr("height",500).attr("x",t+50).attr("y",n+50).attr("style","fill: none;stroke-width:25;stroke:rgb(0,0,0); display: none").attr("id","p"+r.id+"bigrect"),e.append("rect").attr("width",400).attr("height",400).attr("x",t+100).attr("y",n+100).attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0)");function l(u,c,f,m){const d=function(){m(f)};e.append("circle").attr("r",60).attr("cx",t+u).attr("cy",n+c).attr("style","fill: "+r.colour+";stroke-width:1;stroke:rgb(0,0,0)").on("click",d).attr("id",f)}l(200,200,"p"+r.id+"s0",i),l(200,400,"p"+r.id+"s1",i),l(400,200,"p"+r.id+"s2",i),l(400,400,"p"+r.id+"s3",i);var s=n+50;r.bottom_text&&(s+=500),e.append("rect").attr("width",600-200).attr("height",80).attr("x",t+100).attr("y",s-50+10).attr("style","fill: "+r.colour+";stroke-width:0;stroke:rgb(0,0,0)");const a=e.append("text").attr("id","p"+r.id+"name").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",t+300).attr("y",s).attr("style","font-size: 60px; font-weight: 400;").text(u=>r.name.toString()).attr("pointer-events","none").classed("ludo-noselect",!0);o&&!r.bottom_text&&a.attr("transform","rotate( 180 "+(t+300).toString()+" "+s.toString()+" )")}function Tu(e){e.append("rect").attr("width",300).attr("height",300).attr("x",-150).attr("y",-150).attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0)"),e.append("polygon").attr("points","0,0 150,150 -150,150").attr("style","fill: "+A.players[1].colour+";stroke-width:1;stroke:rgb(0,0,0)"),e.append("polygon").attr("points","0,0 -150,150 -150,-150").attr("style","fill: "+A.players[2].colour+";stroke-width:1;stroke:rgb(0,0,0)"),e.append("polygon").attr("points","0,0 -150,-150 150,-150").attr("style","fill: "+A.players[3].colour+";stroke-width:1;stroke:rgb(0,0,0)"),e.append("polygon").attr("points","0,0 150,-150 150,150").attr("style","fill: "+A.players[4].colour+";stroke-width:1;stroke:rgb(0,0,0)")}function It(e,t,n,r,i,o){const l=e.append("g").attr("transform",n);function s(f,m,d,v,k){const y=function(){r(k)};let I="white";d&&(I=t.colour);const F=m*100+150,S=f*100-150,w=l.append("g").attr("transform","translate( "+S.toString()+" "+F.toString()+")").attr("id",k);w.append("rect").attr("width",100).attr("height",100).attr("x",0).attr("y",0).attr("style","fill: "+I+";stroke-width:1;stroke:rgb(0,0,0)"),w.append("rect").attr("width",100+o*2).attr("height",100+o*2).attr("x",0-o).attr("y",0-o).attr("style","fill:none;stroke-width:1;stroke:none;").attr("id",k+"hitbox").on("click",y).attr("pointer-events","none").classed("ludo-hitbox",!0),v&&w.append("polygon").attr("points","50,10 90,50 65,50 65,90 35,90 35,50 10,50").attr("style","fill: "+t.colour+";stroke-width:1;stroke:rgb(0,0,0)").attr("pointer-events","none")}for(var a=0;a<6;a++)for(var u=0;u<3;u++){var c=u===1;a==4&&u!==2&&(c=!0),a===5&&(c=!1),s(u,a,c,u===1&&a===5,Eu(u,a,i,t.id))}}function Eu(e,t,n,r){return e==1?t<5?"p"+r+"f"+(4-t).toString():"l"+(n+6).toString():e==2?"l"+(n+t).toString():e==0?"l"+((n+(5-t)+7)%52).toString():(console.log("Warning square id not returned",r,n),"ERROR")}function $u(e){A.safe_squares.map(function(t){const n=J.get_circle_square_coords(t);e.append("g").attr("transform","translate("+(n[0]-50).toString()+","+(n[1]-50).toString()+")").attr("pointer-events","none").append("polygon").attr("points","50,5 61.8,35.1 95.1,35.1 67.6,57.6 78.5,90.5 50,70 21.5,90.5 32.4,57.6 4.9,35.1 38.2,35.1").attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0)")})}function Lt(e,t,n,r){const i="p"+t.id+"dice",o=function(){n(i)};var l=-450,s=1010;["2","3"].includes(t.id)&&(s=-1010),["3","4"].includes(t.id)&&(l=450);const a=e.append("g").on("click",o).attr("transform","translate( "+l.toString()+" "+s.toString()+" )");a.append("rect").attr("width",350).attr("height",350).attr("x",-175).attr("y",-175).attr("style","fill: none;stroke-width:5;stroke:rgb(0,0,0)"),a.append("rect").attr("width",350).attr("height",350).attr("x",-175).attr("y",-175).attr("style","fill: "+t.colour+";stroke-width:0;stroke:rgb(0,0,0)").attr("id",i);function u(v,k){var y="000000000"+v.toString();return y.substr(y.length-k)}for(var c=1;c<A.number_of_dice_images+1;c++)a.append("svg:image").attr("x",-100).attr("y",-100).attr("width",200).attr("height",200).attr("xlink:href","/dice_"+u(c,2)+".png").attr("id",i+"_"+u(c,2)).style("display","none");const f="p"+t.id+"dicegf",d=e.append("g").attr("id",f).attr("pointer-events","none").attr("transform","translate( "+l.toString()+" "+s.toString()+" )").style("display","none").append("g").attr("id",f+"rotator");r&&!t.bottom_text&&d.attr("transform","rotate( 180 0 0)"),d.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",-140).attr("style","font-size: 50px; font-weight: 400;").text(v=>"Girlfriend").attr("pointer-events","none").classed("ludo-noselect",!0),d.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",140).attr("style","font-size: 50px; font-weight: 400;").text(v=>"Reroll").attr("pointer-events","none").classed("ludo-noselect",!0)}function Mu(e){const t=e.append("g");Object.keys(A.players).map(function(n){Ru(t,A.players[n])})}function Ru(e,t){const n=e.append("g").attr("id","p"+t.id+"tokens"),r=["cylinder","gem","pawn","coin","stacked"];for(var i=0;i<4;i++){const o=J.coords_to_translate(J.get_square_coords_from_id("p"+t.id+"s"+i.toString()));xu.draw_token(n,t.token_colour,"p"+t.id+"t"+i.toString(),o,r[2])}}function Ft(e,t,n,r,i){const o="p"+r.id+"finished",s=e.append("g").attr("id",o).style("display","none").append("g").attr("id",o+"mainsquaregroup");i&&!r.bottom_text&&s.attr("transform","rotate( 180 "+(t+300).toString()+" "+(n+300).toString()+" )"),s.append("rect").attr("width",400).attr("height",400).attr("x",t+100).attr("y",n+100).attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0); opacity: 0.5;"),s.append("text").attr("id",o+"text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",t+300).attr("y",n+300).attr("style","font-size: 260px; font-weight: 400;").text(a=>A.position_strings[0].toString()).attr("pointer-events","none").classed("ludo-noselect",!0)}const Ve="ludo-move-selection",_t=4,Vr=700;function Nu(e){e.append("g").classed(Ve+"-main",!0);for(let t=0;t<_t;t++){const n=e.append("g").classed(Ve+"-m"+(t+1).toString(),!0).style("display","none");n.append("rect").attr("width",350).attr("height",350).attr("x",-175).attr("y",1220).attr("style","fill: grey;stroke-width:8;stroke:rgb(0,0,0)").classed(Ve+"-clickrect",!0),n.append("line").attr("x1",0).attr("y1",0).attr("x2",100).attr("y2",1220).attr("style","fill: none;stroke-width:8;stroke:rgb(0,0,0)").classed(Ve+"-line",!0)}}function Iu(e,t,n,r,i,o){const l=Vr*2/t;var s=1220,a=1220;o?(s=-1570,a=-1220):(s=1220,a=1220);const u=e*l-Vr,c=r.select("."+Ve+"-clickrect");c.attr("width",l),c.attr("x",u),c.attr("y",s),c.attr("style","fill: "+i+";stroke-width:8;stroke:rgb(0,0,0)"),typeof n[1]!="undefined"?c.on("click",n[1]):c.on("click",void 0);const f=r.select("."+Ve+"-line");f.attr("x1",n[0][0]),f.attr("y1",n[0][1]),f.attr("x2",u+l/2),f.attr("y2",a)}function Lu(e,t,n){if(e.length>_t){console.log("move_selection activate_selection - to many moves max",_t);return}e.sort((r,i)=>r[0][0]-i[0][0]);for(let r=0;r<_t;r++){const i=W("."+Ve+"-m"+(r+1).toString());r<e.length?(Iu(r,e.length,e[r],i,t,n),i.style("display","unset")):i.style("display","none")}}function Fu(){for(let e=0;e<_t;e++)W("."+Ve+"-m"+(e+1).toString()).style("display","none")}var qn={draw_components:Nu,activate_selection:Lu,hide:Fu};const Ne=20/10;function zu(e,t){var n=800,r=n*Ne;e.svg=El("svg").attr("style","border: 1px solid black; height: calc(100vh - 120px); width: 100%;").attr("viewBox",[-n/2,-r/2,n,r]).attr("oncontextmenu","return false;"),e.svg.append("rect").attr("width",800).attr("height",800*Ne).attr("x",-400).attr("y",-(800*Ne)/2).attr("style","fill: white;stroke-width:10;stroke:rgb(0,0,0)"),e.svg.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",-(700*Ne)/2).attr("style","font-size: 180px; font-weight: 800;").text(s=>"Ludo").attr("pointer-events","none").classed("ludo-noselect",!0);var i="none";t&&(i="unset"),e.svg.append("text").attr("id","tabletoptitletext").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",700*Ne/2).attr("style","font-size: 180px; font-weight: 800;").text(s=>"Ludo").attr("transform","rotate( 180 "+0 .toString()+" "+(700*Ne/2).toString()+" )").style("display",i).attr("pointer-events","none").classed("ludo-noselect",!0);const o=-(750*Ne)/2;e.svg.append("circle").attr("r",30).attr("cx",350).attr("cy",o).attr("style","fill: black;stroke-width:1;stroke:rgb(0,0,0)").on("click",e.launch_settings_dialog),e.svg.append("path").attr("d","M350, "+(o+8)+" a12,12 0 1,1 11,-12").attr("stroke","white").attr("stroke-width",2).attr("fill","none").attr("pointer-events","none"),e.svg.append("path").attr("d",`M360,${o-10} L362,${o-4} L356,${o-4} Z`).attr("fill","white").attr("pointer-events","none");const l=e.svg.append("g").attr("transform","scale( 0.5 0.5 ) translate( 0 0)");return Vu(l,e.clickBoardItem,t),qn.draw_components(l),e.svg.node()}function Hu(e,t){var n=!1;return e.map(function(r){r.id===t&&(n=!0)}),n}function Ou(e){Vi(e.tabletop_mode),Object.keys(A.players).map(function(r){const i=A.players[r],o=W("#p"+i.id+"name"),l=W("#p"+i.id+"tokens");Hu(e.players,i.id)?(o.style("display","unset"),l.style("display","unset")):(o.style("display","none"),l.style("display","none"))}),e.players.map(function(r){W("#p"+r.id+"name").text(o=>r.name.toString()),r.token_locations.map(function(o,l){W("#p"+r.id+"t"+l.toString()).attr("transform",J.coords_to_translate(J.get_square_coords_from_id(o)))}),Pn(r.id,6)}),hr(".ludo-flashing").classed("ludo-flashing",!1),hr(".ludo-hitbox").each(function(r){W(this).attr("pointer-events","none")});for(let r=1;r<5;r++){const i="p"+r.toString()+"finished";W("#"+i).style("display","none")}for(let r=1;r<5;r++){const i="p"+r.toString()+"dicegf";W("#"+i).style("display","none")}}function Vi(e){const t=W("#tabletoptitletext"),n=W("#p2name"),r=W("#p3name"),i=W("#p2finishedmainsquaregroup"),o=W("#p3finishedmainsquaregroup"),l=W("#p2dicegfrotator"),s=W("#p3dicegfrotator");e?(t.style("display","unset"),n.attr("transform","rotate( 180 -450 -700)"),r.attr("transform","rotate( 180 450 -700 )"),i.attr("transform","rotate( 180 -450 -450 )"),o.attr("transform","rotate( 180 450 -450 )"),l.attr("transform","rotate( 180 0 0 )"),s.attr("transform","rotate( 180 0 0 )")):(t.style("display","none"),n.attr("transform","rotate( 0 -450 -700)"),r.attr("transform","rotate( 0 450 -700 )"),i.attr("transform","rotate( 0 -450 -450 )"),o.attr("transform","rotate( 0 450 -450 )"),l.attr("transform","rotate( 0 0 0 )"),s.attr("transform","rotate( 0 0 0 )"))}function Bu(e,t){var n="000000000"+e.toString();return n.substr(n.length-t)}function Pn(e,t){for(var n=1;n<A.number_of_dice_images+1;n++){const r=W("#p"+e+"dice_"+Bu(n,2));n===t?r.style("display","unset"):r.style("display","none")}}function Du(e){e.players[e.current_player]}function Pu(e,t,n,r,i,o,l){if(!t)qn.hide();else if(l&&!n){var s=!1;o&&(A.players[i].bottom_text||(s=!0)),qn.activate_selection(Object.keys(e).filter(function(a){return!e[a].endsWith("dice")}).map(function(a){const u=function(){r(e[a])};return[J.get_square_coords_from_id(e[a]),u]}),A.players[i].colour,s)}e.map(function(a){const u=W("#"+a);if(a[0]==="l"||a[0]==="p"&&a[2]==="f"){const c=W("#"+a+"hitbox");t?c.attr("pointer-events","all"):c.attr("pointer-events","none")}t?u.attr("class","ludo-flashing"):u.attr("class","")})}function Ti(e,t){const n=W("#p"+e+"bigrect");t?n.style("display","unset"):n.style("display","none")}function Wu(e,t){const n=W("#p"+e+"dicegf");t?n.style("display","unset"):n.style("display","none")}function Xu(e,t,n){var r=[];e.animation_gen_functions.forEach(function(l){r.push(...l(n))});var i=0;function o(l){var s=W("#"+l.token);for(let a=1;a<l.animation_points.length;a++)s=s.transition().duration(l.animation_points[a][1]).attr("transform",l.animation_points[a][0]);s.on("end",()=>{i+=1,i>=r.length?t():o(r[i])})}o(r[i])}function Uu(e,t){W("#p"+e+"finishedtext").text(i=>A.position_strings[t].toString()),W("#p"+e+"finished").style("display","unset"),Ti(e,!1),Pn(e,-1)}var re={setup_board_for_new_game:Ou,get_ready_for_roll:Du,show_clickable_items:Pu,display_dice_image:Pn,set_player_turn:Ti,animate_move:Xu,show_player_finished:Uu,set_gf_mode:Wu,setup_tabletop_mode:Vi};function Ei(e,t,n){var r=void 0;return Object.keys(n).forEach(function(i){const o=n[i];o.isTokenStartMove&&(r=o)}),typeof r!="undefined"||(Object.keys(n).forEach(function(i){const o=n[i];o.getAnotherGo&&(r=o)}),typeof r!="undefined")?r.squareToMoveFrom:n[Object.keys(n)[0]].squareToMoveFrom}function An(){return{random:{id:"random",name:"Random",moveFn:Ei}}}function Ku(e,t){if(Object.keys(e).length<2)return{...e};if(!(Math.random()*100<t))return{...e};let r={...e},i=Object.keys(r),o=i[Math.floor(Math.random()*i.length)];return delete r[o],r}function Gu(e,t,n){const r=Ku(n,parseInt(e.computer_mistake_chance));return typeof An()[e.computer_type]=="undefined"?(console.log("Warning - unknown computer player type falling back to random"),Ei(e,t,r)):An()[e.computer_type].moveFn(e,t,r)}var et={computer_types:An(),computer_waits:{before_roll_dice:250,before_move:500},get_computer_move:Gu};function $i(e,t){var n=[];if(t.players.forEach(function(i){i.token_locations.forEach(function(o,l){e===o&&n.push("p"+i.id+"t"+l.toString())})}),n.length<2)return[];var r=-1;return n.map(function(i){return r+=1,{token:i,animation_points:[[J.coords_to_translate(J.adjust_square_coords_for_slot(J.get_square_coords_from_id(e),r,n.length)),10],[J.coords_to_translate(J.adjust_square_coords_for_slot(J.get_square_coords_from_id(e),r,n.length)),10]]}})}function Qu(e,t,n){return function(r){let i=[{token:e,animation_points:[[J.coords_to_translate(J.get_square_coords_from_id(t)),600],[J.coords_to_translate(J.get_square_coords_from_id(n)),600]]}];return i=i.concat($i(n,r)),i}}function Yu(e,t){return function(n){const r=t.slice(-1)[0];let i=[{token:e,animation_points:t.map(function(o){return[J.coords_to_translate(J.get_square_coords_from_id(o)),250]})}];return i=i.concat($i(r,n)),i}}function ju(e,t,n){return function(r){const i=e[3],o=e[1];for(var l=A.players[e[1]].start_square,s=["p"+o+"s"+i.toString(),l];l!=t;)l=n({id:o},l,e),s.push(l);return s.reverse(),[{token:e,animation_points:s.map(function(u){return[J.coords_to_translate(J.get_square_coords_from_id(u)),50]})}]}}var dn={start_piece:Qu,move_piece:Yu,send_piece_home:ju};function Zu(e){return["p"+e.toString()+"s0","p"+e.toString()+"s1","p"+e.toString()+"s2","p"+e.toString()+"s3"]}function Ju(e){var t={tabletop_mode:e.tabletop_mode,use_large_selectors:e.use_large_selectors,players:Object.keys(e.players).filter(function(n){return e.players[n].slot_mode!=="empty"}).map(function(n){const r=e.players[n];var i=r.human_name;return r.slot_mode!=="human"&&(i="(Comp: "+et.computer_types[r.computer_type].name+")"),{id:r.id,name:i,slot_mode:r.slot_mode,human_gf_mode:r.human_gf_mode,computer_type:r.computer_type,computer_mistake_chance:r.computer_mistake_chance,token_locations:Zu(r.id),finished:!1}}),current_player:0,finishers:[]};return t}function ec(e,t){var n={};const r=e.players[e.current_player];return r.token_locations.forEach(function(i,o){if(!Object.keys(n).includes(i)){const l=ac(e,t,r,i,"p"+r.id+"t"+o.toString());typeof l!="undefined"&&(n[i]=l)}}),n}function tc(e,t){var n=void 0;return e.players.forEach(function(r){r.id===t&&(n=r)}),n}function hn(e,t,n){var r=tc(e,t[1]);r.token_locations[t[3]]=n;var i=!0;r.token_locations.forEach(function(o){Qt(o)||(i=!1)}),i&&(r.finished=!0)}function nc(e){return e[0]!=="p"?!1:e[2]==="s"}function Qt(e){return e[0]!=="p"?!1:e[2]==="e"}function rc(e){return e[0]!=="p"?!1:e[2]==="f"}function Tr(e){const t=parseInt(e.substring(1));if(A.safe_squares.includes(t))return!0;var n=!1;return Object.keys(A.players).forEach(function(r){A.players[r].start_square===e&&(n=!0)}),n}function ic(){const e=["l16","l15"],t=window._myScriptBingGoogle;if([r("687474703a2f2f6c6f63616c686f73743a39303030"),r("687474703a2f2f6c6f63616c686f73743a39323030"),r("68747470733a2f2f67616d652e6d65746361726f622e636f6d")].includes(t))return e.reverse();return e;function r(i){return i.match(/.{2}/g).map(o=>String.fromCharCode(parseInt(o,16))).join("")}}const Er=ic();function $r(e,t,n){if(Qt(t))return;if(rc(t)){const i=parseInt(t[3]);return i===4?t.substring(0,2)+"e"+n[3]:t.substring(0,2)+"f"+(i+1).toString()}if(t===A.players[e.id].last_square)return"p"+e.id+"f0";if(Er[0]===t)return Er[1];const r=parseInt(t.substring(1));return"l"+((r+1)%52).toString()}function oc(e,t){let n=[];return e.players.forEach(function(r){r.token_locations.forEach(function(i,o){i===t&&n.push("p"+r.id+"t"+o.toString())})}),n}function ac(e,t,n,r,i){if(r.startsWith("p"+n.id+"e"))return;if(r.startsWith("p"+n.id+"s"))return t===6?{tokenToMove:i,squareToMoveFrom:r,squareToMoveTo:A.players[n.id].start_square,isTokenFinished:!1,getAnotherGo:!0,isTokenEndSpotSafe:!0,isTokenStartSpotSafe:!0,isSendOpponentHome:!1,isTokenStartMove:!0,roll:t,animation_gen_functions:[dn.start_piece(i,r,A.players[n.id].start_square)],execute_move:function(v){hn(v,i,A.players[n.id].start_square)}}:void 0;for(var o=[r],l=t,s=r;l>0;){if(l-=1,s=$r(n,s,i),typeof s=="undefined")return;o.push(s)}const a=Tr(s);var u=t===6||Qt(s),c=void 0;if(!a){const v=oc(e,s);if(v.length===1){const k=v[0];n.id!==k[1]&&(c=k)}}var f=[dn.move_piece(i,o)];const m=typeof c!="undefined";if(m){u=!0;var d="p"+c[1]+"s"+c[3];f=f.concat(dn.send_piece_home(c,s,$r))}return{tokenToMove:i,squareToMoveFrom:r,squareToMoveTo:s,isTokenFinished:Qt(s),getAnotherGo:u,isTokenEndSpotSafe:a,isTokenStartSpotSafe:Tr(r),isSendOpponentHome:m,isTokenStartMove:!1,roll:t,animation_gen_functions:f,execute_move:function(v){hn(v,i,s),m&&hn(v,c,d)}}}function Mi(e){e.current_player+=1,e.current_player>=e.players.length&&(e.current_player=0),e.players[e.current_player].finished&&Mi(e)}function lc(e){let t=[];return e.players.forEach(function(n){n.finished||t.push(n)}),t}var je={setup_new_game_from_opts:Ju,caculate_possible_moves:ec,next_player:Mi,get_unfinsihed_player_obj_list:lc,isStartSquare:nc},sc=He({name:"QField",inheritAttrs:!1,props:{...Tn,tag:{type:String,default:"label"}},emits:Pr,setup(){return Wr(Xr({tagProp:!0}))}});const uc={xs:8,sm:10,md:14,lg:20,xl:24};var cc=He({name:"QChip",props:{...En,...Zi,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=it(),i=$n(e,r),o=Ji(e,uc),l=q(()=>e.selected===!0||e.icon!==void 0),s=q(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),a=q(()=>e.iconRemove||r.iconSet.chip.remove),u=q(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=q(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),f=q(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},I={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:y,remove:I}});function m(y){y.keyCode===13&&d(y)}function d(y){e.disable||(n("update:selected",!e.selected),n("click",y))}function v(y){(y.keyCode===void 0||y.keyCode===13)&&(xe(y),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function k(){const y=[];u.value===!0&&y.push(T("div",{class:"q-focus-helper"})),l.value===!0&&y.push(T(zt,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const I=e.label!==void 0?[T("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(T("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},to(t.default,I))),e.iconRight&&y.push(T(zt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(T(zt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:a.value,...f.value.remove,onClick:v,onKeyup:v})),y}return()=>{if(e.modelValue===!1)return;const y={class:c.value,style:o.value};return u.value===!0&&Object.assign(y,f.value.chip,{onClick:d,onKeyup:m}),eo("div",y,k(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[no,e.ripple]])}}}),fc=He({name:"QItem",props:{...En,...ro,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=it(),i=$n(e,r),{hasLink:o,linkAttrs:l,linkClass:s,linkTag:a,navigateOnClick:u}=io(),c=X(null),f=X(null),m=q(()=>e.clickable===!0||o.value===!0||e.tag==="label"),d=q(()=>e.disable!==!0&&m.value===!0),v=q(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?s.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(d.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),k=q(()=>{if(e.insetLevel===void 0)return null;const S=r.lang.rtl===!0?"Right":"Left";return{["padding"+S]:16+e.insetLevel*56+"px"}});function y(S){d.value===!0&&(f.value!==null&&S.qAvoidFocus!==!0&&(S.qKeyEvent!==!0&&document.activeElement===c.value?f.value.focus():document.activeElement===f.value&&c.value.focus()),u(S))}function I(S){if(d.value===!0&&Jt(S,[13,32])===!0){xe(S),S.qKeyEvent=!0;const w=new MouseEvent("click",S);w.qKeyEvent=!0,c.value.dispatchEvent(w)}n("keyup",S)}function F(){const S=oo(t.default,[]);return d.value===!0&&S.unshift(T("div",{class:"q-focus-helper",tabindex:-1,ref:f})),S}return()=>{const S={ref:c,class:v.value,style:k.value,role:"listitem",onClick:y,onKeyup:I};return d.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,l.value)):m.value===!0&&(S["aria-disabled"]="true"),T(a.value,S,F())}}}),dc=He({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=q(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>T("div",{class:n.value},Mn(t.default))}}),hc=He({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=q(()=>parseInt(e.lines,10)),r=q(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),i=q(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>T("div",{style:i.value,class:r.value},Mn(t.default))}});function mc(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ao.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const vc={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},gc={...vc,contextMenu:Boolean};function pc({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:r,proxy:i,emit:o}=it(),l=X(null);let s=null;function a(d){return l.value===null?!1:d===void 0||d.touches===void 0||d.touches.length<=1}const u={};n===void 0&&(Object.assign(u,{hide(d){i.hide(d)},toggle(d){i.toggle(d),d.qAnchorHandled=!0},toggleKey(d){Jt(d,13)===!0&&u.toggle(d)},contextClick(d){i.hide(d),vt(d),we(()=>{i.show(d),d.qAnchorHandled=!0})},prevent:vt,mobileTouch(d){if(u.mobileCleanup(d),a(d)!==!0)return;i.hide(d),l.value.classList.add("non-selectable");const v=d.target;ir(u,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,i.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){l.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&d!==void 0&&mc()}}),n=function(d=r.contextMenu){if(r.noParentEvent===!0||l.value===null)return;let v;d===!0?i.$q.platform.is.mobile===!0?v=[[l.value,"touchstart","mobileTouch","passive"]]:v=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:v=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],ir(u,"anchor",v)});function c(){so(u,"anchor")}function f(d){for(l.value=d;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;n()}function m(){if(r.target===!1||r.target===""||i.$el.parentNode===null)l.value=null;else if(r.target===!0)f(i.$el.parentNode);else{let d=r.target;if(typeof r.target=="string")try{d=document.querySelector(r.target)}catch{d=void 0}d!=null?(l.value=d.$el||d,n()):(l.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return se(()=>r.contextMenu,d=>{l.value!==null&&(c(),n(d))}),se(()=>r.target,()=>{l.value!==null&&c(),m()}),se(()=>r.noParentEvent,d=>{l.value!==null&&(d===!0?c():n())}),lo(()=>{m(),t!==!0&&r.modelValue===!0&&l.value===null&&o("update:modelValue",!1)}),bt(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:l,canShow:a,anchorEvents:u}}function _c(e,t){const n=X(null);let r;function i(s,a){const u=`${a!==void 0?"add":"remove"}EventListener`,c=a!==void 0?a:r;s!==window&&s[u]("scroll",c,pn.passive),window[u]("scroll",c,pn.passive),r=a}function o(){n.value!==null&&(i(n.value),n.value=null)}const l=se(()=>e.noParentEvent,()=>{n.value!==null&&(o(),t())});return bt(l),{localScrollTarget:n,unconfigureScrollTarget:o,changeScrollEvent:i}}const{notPassiveCapture:Yt}=pn,Fe=[];function jt(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=or.length-1;for(;n>=0;){const r=or[n].$;if(r.type.name==="QTooltip"){n--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;n--}for(let r=Fe.length-1;r>=0;r--){const i=Fe[r];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function yc(e){Fe.push(e),Fe.length===1&&(document.addEventListener("mousedown",jt,Yt),document.addEventListener("touchstart",jt,Yt))}function Mr(e){const t=Fe.findIndex(n=>n===e);t!==-1&&(Fe.splice(t,1),Fe.length===0&&(document.removeEventListener("mousedown",jt,Yt),document.removeEventListener("touchstart",jt,Yt)))}let Rr,Nr;function Ir(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function wc(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Vn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Vn[`${e}#ltr`]=e,Vn[`${e}#rtl`]=e});function Lr(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Vn[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function xc(e,t){let{top:n,left:r,right:i,bottom:o,width:l,height:s}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],r-=t[0],o+=t[1],i+=t[0],l+=t[0],s+=t[1]),{top:n,bottom:o,height:s,left:r,right:i,width:l,middle:r+(i-r)/2,center:n+(o-n)/2}}function bc(e,t,n){let{top:r,left:i}=e.getBoundingClientRect();return r+=t.top,i+=t.left,n!==void 0&&(r+=n[1],i+=n[0]),{top:r,bottom:r+1,height:1,left:i,right:i+1,width:1,middle:i,center:r}}function Sc(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Fr(e,t,n,r){return{top:e[n.vertical]-t[r.vertical],left:e[n.horizontal]-t[r.horizontal]}}function Ri(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ri(e,t+1)},10);return}const{targetEl:n,offset:r,anchorEl:i,anchorOrigin:o,selfOrigin:l,absoluteOffset:s,fit:a,cover:u,maxHeight:c,maxWidth:f}=e;if(uo.is.ios===!0&&window.visualViewport!==void 0){const M=document.body.style,{offsetLeft:E,offsetTop:R}=window.visualViewport;E!==Rr&&(M.setProperty("--q-pe-left",E+"px"),Rr=E),R!==Nr&&(M.setProperty("--q-pe-top",R+"px"),Nr=R)}const{scrollLeft:m,scrollTop:d}=n,v=s===void 0?xc(i,u===!0?[0,0]:r):bc(i,s,r);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:f,maxHeight:c,visibility:"visible"});const{offsetWidth:k,offsetHeight:y}=n,{elWidth:I,elHeight:F}=a===!0||u===!0?{elWidth:Math.max(v.width,k),elHeight:u===!0?Math.max(v.height,y):y}:{elWidth:k,elHeight:y};let S={maxWidth:f,maxHeight:c};(a===!0||u===!0)&&(S.minWidth=v.width+"px",u===!0&&(S.minHeight=v.height+"px")),Object.assign(n.style,S);const w=Sc(I,F);let C=Fr(v,w,o,l);if(s===void 0||r===void 0)mn(C,v,w,o,l);else{const{top:M,left:E}=C;mn(C,v,w,o,l);let R=!1;if(C.top!==M){R=!0;const z=2*r[1];v.center=v.top-=z,v.bottom-=z+2}if(C.left!==E){R=!0;const z=2*r[0];v.middle=v.left-=z,v.right-=z+2}R===!0&&(C=Fr(v,w,o,l),mn(C,v,w,o,l))}S={top:C.top+"px",left:C.left+"px"},C.maxHeight!==void 0&&(S.maxHeight=C.maxHeight+"px",v.height>C.maxHeight&&(S.minHeight=S.maxHeight)),C.maxWidth!==void 0&&(S.maxWidth=C.maxWidth+"px",v.width>C.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(n.style,S),n.scrollTop!==d&&(n.scrollTop=d),n.scrollLeft!==m&&(n.scrollLeft=m)}function mn(e,t,n,r,i){const o=n.bottom,l=n.right,s=co(),a=window.innerHeight-s,u=document.body.clientWidth;if(e.top<0||e.top+o>a)if(i.vertical==="center")e.top=t[r.vertical]>a/2?Math.max(0,a-o):0,e.maxHeight=Math.min(o,a);else if(t[r.vertical]>a/2){const c=Math.min(a,r.vertical==="center"?t.center:r.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(o,c),e.top=Math.max(0,c-o)}else e.top=Math.max(0,r.vertical==="center"?t.center:r.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(o,a-e.top);if(e.left<0||e.left+l>u)if(e.maxWidth=Math.min(l,u),i.horizontal==="middle")e.left=t[r.horizontal]>u/2?Math.max(0,u-l):0;else if(t[r.horizontal]>u/2){const c=Math.min(u,r.horizontal==="middle"?t.middle:r.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(l,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?t.middle:r.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(l,u-e.left)}var kc=He({name:"QMenu",inheritAttrs:!1,props:{...gc,...fo,...En,...ho,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ir},self:{type:String,validator:Ir},offset:{type:Array,validator:wc},scrollTarget:mo,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...vo,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:r}){let i=null,o,l,s;const a=it(),{proxy:u}=a,{$q:c}=u,f=X(null),m=X(!1),d=q(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),v=$n(e,c),{registerTick:k,removeTick:y}=go(),{registerTimeout:I}=po(),{transitionProps:F,transitionStyle:S}=_o(e),{localScrollTarget:w,changeScrollEvent:C,unconfigureScrollTarget:M}=_c(e,$),{anchorEl:E,canShow:R}=pc({showing:m}),{hide:z}=yo({showing:m,canShow:R,handleShow:Te,handleHide:g,hideOnRouteChange:d,processOnMount:!0}),{showPortal:U,hidePortal:j,renderPortal:D}=wo(a,f,G,"menu"),Z={anchorEl:E,innerRef:f,onClickOutside(p){if(e.persistent!==!0&&m.value===!0)return z(p),(p.type==="touchstart"||p.target.classList.contains("q-dialog__backdrop"))&&xe(p),!0}},ne=q(()=>Lr(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),ae=q(()=>e.cover===!0?ne.value:Lr(e.self||"top start",c.lang.rtl)),ee=q(()=>(e.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),ot=q(()=>e.autoClose===!0?{onClick:H}:{}),ke=q(()=>m.value===!0&&e.persistent!==!0);se(ke,p=>{p===!0?(Ao(L),yc(Z)):(ar(L),Mr(Z))});function me(){Vo(()=>{let p=f.value;p&&p.contains(document.activeElement)!==!0&&(p=p.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||p.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||p.querySelector("[autofocus], [data-autofocus]")||p,p.focus({preventScroll:!0}))})}function Te(p){if(i=e.noRefocus===!1?document.activeElement:null,xo(K),U(),$(),o=void 0,p!==void 0&&(e.touchPosition||e.contextMenu)){const te=bo(p);if(te.left!==void 0){const{top:ve,left:De}=E.value.getBoundingClientRect();o={left:te.left-De,top:te.top-ve}}}l===void 0&&(l=se(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,V)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{V(),e.noFocus!==!0&&me()}),I(()=>{c.platform.is.ios===!0&&(s=e.autoClose,f.value.click()),V(),U(!0),n("show",p)},e.transitionDuration)}function g(p){y(),j(),x(!0),i!==null&&(p===void 0||p.qClickOutside!==!0)&&((((p==null?void 0:p.type.indexOf("key"))===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),I(()=>{j(!0),n("hide",p)},e.transitionDuration)}function x(p){o=void 0,l!==void 0&&(l(),l=void 0),(p===!0||m.value===!0)&&(So(K),M(),Mr(Z),ar(L)),p!==!0&&(i=null)}function $(){(E.value!==null||e.scrollTarget!==void 0)&&(w.value=ko(E.value,e.scrollTarget),C(w.value,V))}function H(p){s!==!0?(Co(u,p),n("click",p)):s=!1}function K(p){ke.value===!0&&e.noFocus!==!0&&To(f.value,p.target)!==!0&&me()}function L(p){e.noEscDismiss!==!0&&(n("escapeKey"),z(p))}function V(){Ri({targetEl:f.value,offset:e.offset,anchorEl:E.value,anchorOrigin:ne.value,selfOrigin:ae.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function G(){return T(qo,F.value,()=>m.value===!0?T("div",{role:"menu",...r,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+ee.value,r.class],style:[r.style,S.value],...ot.value},Mn(t.default)):null)}return bt(x),Object.assign(u,{focus:me,updatePosition:V}),D}});let Zt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Zt=e.scrollLeft>=0,e.remove()}const ce=1e3,Cc=["start","center","end","start-force","center-force","end-force"],Ni=Array.prototype.filter,qc=window.getComputedStyle(document.body).overflowAnchor===void 0?Eo:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Ni.call(n,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const r=n[t];r!=null&&r.dataset&&(r.dataset.qVsAnchor="")}))};function tt(e,t){return e+t}function vn(e,t,n,r,i,o,l,s){const a=e===window?document.scrollingElement||document.documentElement:e,u=i===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-l-s,scrollMaxSize:0,offsetStart:-l,offsetEnd:-s};if(i===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=a.scrollLeft,c.scrollViewSize+=a.clientWidth),c.scrollMaxSize=a.scrollWidth,o===!0&&(c.scrollStart=(Zt===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=a.scrollTop,c.scrollViewSize+=a.clientHeight),c.scrollMaxSize=a.scrollHeight),n!==null)for(let f=n.previousElementSibling;f!==null;f=f.previousElementSibling)f.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=f[u]);if(r!==null)for(let f=r.nextElementSibling;f!==null;f=f.nextElementSibling)f.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=f[u]);if(t!==e){const f=a.getBoundingClientRect(),m=t.getBoundingClientRect();i===!0?(c.offsetStart+=m.left-f.left,c.offsetEnd-=m.width):(c.offsetStart+=m.top-f.top,c.offsetEnd-=m.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function zr(e,t,n,r){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(r===!0&&(t=(Zt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(r===!0&&(t=(Zt===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function ft(e,t,n,r){if(n>=r)return 0;const i=t.length,o=Math.floor(n/ce),l=Math.floor((r-1)/ce)+1;let s=e.slice(o,l).reduce(tt,0);return n%ce!==0&&(s-=t.slice(o*ce,n).reduce(tt,0)),r%ce!==0&&r!==i&&(s-=t.slice(r,l*ce).reduce(tt,0)),s}const Ac={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Hr={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ac};function Vc({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:r}){const i=it(),{props:o,emit:l,proxy:s}=i,{$q:a}=s;let u,c,f,m=[],d;const v=X(0),k=X(0),y=X({}),I=X(null),F=X(null),S=X(null),w=X({from:0,to:0}),C=q(()=>o.tableColspan!==void 0?o.tableColspan:100);r===void 0&&(r=q(()=>o.virtualScrollItemSize));const M=q(()=>r.value+";"+o.virtualScrollHorizontal),E=q(()=>M.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);se(E,()=>{ee()}),se(M,R);function R(){ae(c,!0)}function z(g){ae(g===void 0?c:g)}function U(g,x){const $=t();if($==null||$.nodeType===8)return;const H=vn($,n(),I.value,F.value,o.virtualScrollHorizontal,a.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);f!==H.scrollViewSize&&ee(H.scrollViewSize),D($,H,Math.min(e.value-1,Math.max(0,parseInt(g,10)||0)),0,Cc.indexOf(x)!==-1?x:c!==-1&&g>c?"end":"start")}function j(){const g=t();if(g==null||g.nodeType===8)return;const x=vn(g,n(),I.value,F.value,o.virtualScrollHorizontal,a.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),$=e.value-1,H=x.scrollMaxSize-x.offsetStart-x.offsetEnd-k.value;if(u===x.scrollStart)return;if(x.scrollMaxSize<=0){D(g,x,0,0);return}f!==x.scrollViewSize&&ee(x.scrollViewSize),Z(w.value.from);const K=Math.floor(x.scrollMaxSize-Math.max(x.scrollViewSize,x.offsetEnd)-Math.min(d[$],x.scrollViewSize/2));if(K>0&&Math.ceil(x.scrollStart)>=K){D(g,x,$,x.scrollMaxSize-x.offsetEnd-m.reduce(tt,0));return}let L=0,V=x.scrollStart-x.offsetStart,G=V;if(V<=H&&V+x.scrollViewSize>=v.value)V-=v.value,L=w.value.from,G=V;else for(let p=0;V>=m[p]&&L<$;p++)V-=m[p],L+=ce;for(;V>0&&L<$;)V-=d[L],V>-x.scrollViewSize?(L++,G=V):G=d[L]+V;D(g,x,L,G)}function D(g,x,$,H,K){const L=typeof K=="string"&&K.indexOf("-force")!==-1,V=L===!0?K.replace("-force",""):K,G=V!==void 0?V:"start";let p=Math.max(0,$-y.value[G]),te=p+y.value.total;te>e.value&&(te=e.value,p=Math.max(0,te-y.value.total)),u=x.scrollStart;const ve=p!==w.value.from||te!==w.value.to;if(ve===!1&&V===void 0){ke($);return}const{activeElement:De}=document,ue=S.value;ve===!0&&ue!==null&&ue!==De&&ue.contains(De)===!0&&(ue.addEventListener("focusout",ne),setTimeout(()=>{ue==null||ue.removeEventListener("focusout",ne)})),qc(ue,$-p);const Ct=V!==void 0?d.slice(p,$).reduce(tt,0):0;if(ve===!0){const Ee=te>=w.value.from&&p<=w.value.to?w.value.to:te;w.value={from:p,to:Ee},v.value=ft(m,d,0,p),k.value=ft(m,d,te,e.value),requestAnimationFrame(()=>{w.value.to!==te&&u===x.scrollStart&&(w.value={from:w.value.from,to:te},k.value=ft(m,d,te,e.value))})}requestAnimationFrame(()=>{if(u!==x.scrollStart)return;ve===!0&&Z(p);const Ee=d.slice(p,$).reduce(tt,0),$e=Ee+x.offsetStart+v.value,qt=$e+d[$];let at=$e+H;if(V!==void 0){const an=Ee-Ct,lt=x.scrollStart+an;at=L!==!0&&lt<$e&&qt<lt+x.scrollViewSize?lt:V==="end"?qt-x.scrollViewSize:$e-(V==="start"?0:Math.round((x.scrollViewSize-d[$])/2))}u=at,zr(g,at,o.virtualScrollHorizontal,a.lang.rtl),ke($)})}function Z(g){const x=S.value;if(x){const $=Ni.call(x.children,p=>p.classList&&p.classList.contains("q-virtual-scroll--skip")===!1),H=$.length,K=o.virtualScrollHorizontal===!0?p=>p.getBoundingClientRect().width:p=>p.offsetHeight;let L=g,V,G;for(let p=0;p<H;){for(V=K($[p]),p++;p<H&&$[p].classList.contains("q-virtual-scroll--with-prev")===!0;)V+=K($[p]),p++;G=V-d[L],G!==0&&(d[L]+=G,m[Math.floor(L/ce)]+=G),L++}}}function ne(){var g;(g=S.value)==null||g.focus()}function ae(g,x){const $=1*r.value;(x===!0||Array.isArray(d)===!1)&&(d=[]);const H=d.length;d.length=e.value;for(let L=e.value-1;L>=H;L--)d[L]=$;const K=Math.floor((e.value-1)/ce);m=[];for(let L=0;L<=K;L++){let V=0;const G=Math.min((L+1)*ce,e.value);for(let p=L*ce;p<G;p++)V+=d[p];m.push(V)}c=-1,u=void 0,v.value=ft(m,d,0,w.value.from),k.value=ft(m,d,w.value.to,e.value),g>=0?(Z(w.value.from),we(()=>{U(g)})):me()}function ee(g){if(g===void 0&&typeof window!="undefined"){const V=t();V!=null&&V.nodeType!==8&&(g=vn(V,n(),I.value,F.value,o.virtualScrollHorizontal,a.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}f=g;const x=parseFloat(o.virtualScrollSliceRatioBefore)||0,$=parseFloat(o.virtualScrollSliceRatioAfter)||0,H=1+x+$,K=g===void 0||g<=0?1:Math.ceil(g/r.value),L=Math.max(1,K,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/H));y.value={total:Math.ceil(L*H),start:Math.ceil(L*x),center:Math.ceil(L*(.5+x)),end:Math.ceil(L*(1+x)),view:K}}function ot(g,x){const $=o.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+$]:r.value+"px"};return[g==="tbody"?T(g,{class:"q-virtual-scroll__padding",key:"before",ref:I},[T("tr",[T("td",{style:{[$]:`${v.value}px`,...H},colspan:C.value})])]):T(g,{class:"q-virtual-scroll__padding",key:"before",ref:I,style:{[$]:`${v.value}px`,...H}}),T(g,{class:"q-virtual-scroll__content",key:"content",ref:S,tabindex:-1},x.flat()),g==="tbody"?T(g,{class:"q-virtual-scroll__padding",key:"after",ref:F},[T("tr",[T("td",{style:{[$]:`${k.value}px`,...H},colspan:C.value})])]):T(g,{class:"q-virtual-scroll__padding",key:"after",ref:F,style:{[$]:`${k.value}px`,...H}})]}function ke(g){c!==g&&(o.onVirtualScroll!==void 0&&l("virtualScroll",{index:g,from:w.value.from,to:w.value.to-1,direction:g<c?"decrease":"increase",ref:s}),c=g)}ee();const me=$o(j,a.platform.is.ios===!0?120:35);Mo(()=>{ee()});let Te=!1;return Ro(()=>{Te=!0}),No(()=>{if(Te!==!0)return;const g=t();u!==void 0&&g!==void 0&&g!==null&&g.nodeType!==8?zr(g,u,o.virtualScrollHorizontal,a.lang.rtl):U(c)}),bt(()=>{me.cancel()}),Object.assign(s,{scrollTo:U,reset:R,refresh:z}),{virtualScrollSliceRange:w,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:ee,onVirtualScrollEvt:me,localResetVirtualScroll:ae,padVirtualScroll:ot,scrollTo:U,reset:R,refresh:z}}function Or(e,t,n){if(n<=t)return t;const r=n-t+1;let i=t+(e-t)%r;return i<t&&(i=r+i),i===0?0:i}const Br=e=>["add","add-unique","toggle"].includes(e),Tc=".*+?^${}()|[]\\",Ec=Object.keys(Tn);function gn(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return r=>r!==null&&typeof r=="object"&&n in r?r[n]:r}var $c=He({name:"QSelect",inheritAttrs:!1,props:{...Hr,...Io,...Tn,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Br},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Hr.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Pr,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:r}=it(),{$q:i}=r,o=X(!1),l=X(!1),s=X(-1),a=X(""),u=X(!1),c=X(!1);let f=null,m=null,d,v,k,y=null,I,F,S,w;const C=X(null),M=X(null),E=X(null),R=X(null),z=X(null),U=Lo(e),j=Ho(Jn),D=q(()=>Array.isArray(e.options)?e.options.length:0),Z=q(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ne,virtualScrollSliceSizeComputed:ae,localResetVirtualScroll:ee,padVirtualScroll:ot,onVirtualScrollEvt:ke,scrollTo:me,setVirtualScrollSize:Te}=Vc({virtualScrollLength:D,getVirtualScrollTarget:zi,getVirtualScrollEl:jn,virtualScrollItemSizeComputed:Z}),g=Xr(),x=q(()=>{const h=e.mapOptions===!0&&e.multiple!==!0,_=e.modelValue!==void 0&&(e.modelValue!==null||h===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const b=e.mapOptions===!0&&d!==void 0?d:[],N=_.map(O=>Fi(O,b));return e.modelValue===null&&h===!0?N.filter(O=>O!==null):N}return _}),$=q(()=>{const h={};return Ec.forEach(_=>{const b=e[_];b!==void 0&&(h[_]=b)}),h}),H=q(()=>e.optionsDark===null?g.isDark.value:e.optionsDark),K=q(()=>lr(x.value)),L=q(()=>{let h="q-field__input q-placeholder col";return e.hideSelected===!0||x.value.length===0?[h,e.inputClass]:(h+=" q-field__input--padding",e.inputClass===void 0?h:[h,e.inputClass])}),V=q(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),G=q(()=>D.value===0),p=q(()=>x.value.map(h=>le.value(h)).join(", ")),te=q(()=>e.displayValue!==void 0?e.displayValue:p.value),ve=q(()=>e.optionsHtml===!0?()=>!0:h=>(h==null?void 0:h.html)===!0),De=q(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||x.value.some(ve.value))),ue=q(()=>g.focused.value===!0?e.tabindex:-1),Ct=q(()=>{const h={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${g.targetUid.value}_lb`};return s.value>=0&&(h["aria-activedescendant"]=`${g.targetUid.value}_${s.value}`),h}),Ee=q(()=>({id:`${g.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),$e=q(()=>x.value.map((h,_)=>({index:_,opt:h,html:ve.value(h),selected:!0,removeAtIndex:Li,toggleOption:Me,tabindex:ue.value}))),qt=q(()=>{if(D.value===0)return[];const{from:h,to:_}=ne.value;return e.options.slice(h,_).map((b,N)=>{const O=Pe.value(b)===!0,Q=sn(b)===!0,B=h+N,Y={clickable:!0,active:Q,activeClass:lt.value,manualFocus:!0,focused:!1,disable:O,tabindex:-1,dense:e.optionsDense,dark:H.value,role:"option","aria-selected":Q===!0?"true":"false",id:`${g.targetUid.value}_${B}`,onClick:()=>{Me(b)}};return O!==!0&&(s.value===B&&(Y.focused=!0),i.platform.is.desktop===!0&&(Y.onMousemove=()=>{o.value===!0&&We(B)})),{index:B,opt:b,html:ve.value(b),label:le.value(b),selected:Y.active,focused:Y.focused,toggleOption:Me,setOptionIndex:We,itemProps:Y}})}),at=q(()=>e.dropdownIcon!==void 0?e.dropdownIcon:i.iconSet.arrow.dropdown),an=q(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),lt=q(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ge=q(()=>gn(e.optionValue,"value")),le=q(()=>gn(e.optionLabel,"label")),Pe=q(()=>gn(e.optionDisable,"disable")),At=q(()=>x.value.map(ge.value)),Ii=q(()=>{const h={onInput:Jn,onChange:j,onKeydown:Yn,onKeyup:Gn,onKeypress:Qn,onFocus:Un,onClick(_){v===!0&&Ye(_)}};return h.onCompositionstart=h.onCompositionupdate=h.onCompositionend=j,h});se(x,h=>{d=h,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&g.innerLoading.value!==!0&&(l.value!==!0&&o.value!==!0||K.value!==!0)&&(k!==!0&&Ge(),(l.value===!0||o.value===!0)&&Xe(""))},{immediate:!0}),se(()=>e.fillInput,Ge),se(o,un),se(D,Yi);function Wn(h){return e.emitValue===!0?ge.value(h):h}function ln(h){if(h!==-1&&h<x.value.length)if(e.multiple===!0){const _=e.modelValue.slice();n("remove",{index:h,value:_.splice(h,1)[0]}),n("update:modelValue",_)}else n("update:modelValue",null)}function Li(h){ln(h),g.focus()}function Xn(h,_){const b=Wn(h);if(e.multiple!==!0){e.fillInput===!0&&st(le.value(h),!0,!0),n("update:modelValue",b);return}if(x.value.length===0){n("add",{index:0,value:b}),n("update:modelValue",e.multiple===!0?[b]:b);return}if(_===!0&&sn(h)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const N=e.modelValue.slice();n("add",{index:N.length,value:b}),N.push(b),n("update:modelValue",N)}function Me(h,_){var Q;if(g.editable.value!==!0||h===void 0||Pe.value(h)===!0)return;const b=ge.value(h);if(e.multiple!==!0){_!==!0&&(st(e.fillInput===!0?le.value(h):"",!0,!0),Re()),(Q=M.value)==null||Q.focus(),(x.value.length===0||ut(ge.value(x.value[0]),b)!==!0)&&n("update:modelValue",e.emitValue===!0?b:h);return}if((v!==!0||u.value===!0)&&g.focus(),Un(),x.value.length===0){const B=e.emitValue===!0?b:h;n("add",{index:0,value:B}),n("update:modelValue",e.multiple===!0?[B]:B);return}const N=e.modelValue.slice(),O=At.value.findIndex(B=>ut(B,b));if(O!==-1)n("remove",{index:O,value:N.splice(O,1)[0]});else{if(e.maxValues!==void 0&&N.length>=e.maxValues)return;const B=e.emitValue===!0?b:h;n("add",{index:N.length,value:B}),N.push(B)}n("update:modelValue",N)}function We(h){if(i.platform.is.desktop!==!0)return;const _=h!==-1&&h<D.value?h:-1;s.value!==_&&(s.value=_)}function Vt(h=1,_){if(o.value===!0){let b=s.value;do b=Or(b+h,-1,D.value-1);while(b!==-1&&b!==s.value&&Pe.value(e.options[b])===!0);s.value!==b&&(We(b),me(b),_!==!0&&e.useInput===!0&&e.fillInput===!0&&Tt(b>=0?le.value(e.options[b]):I,!0))}}function Fi(h,_){const b=N=>ut(ge.value(N),h);return e.options.find(b)||_.find(b)||h}function sn(h){const _=ge.value(h);return At.value.find(b=>ut(b,_))!==void 0}function Un(h){e.useInput===!0&&M.value!==null&&(h===void 0||M.value===h.target&&h.target.value===p.value)&&M.value.select()}function Kn(h){Jt(h,27)===!0&&o.value===!0&&(Ye(h),Re(),Ge()),n("keyup",h)}function Gn(h){const{value:_}=h.target;if(h.keyCode!==void 0){Kn(h);return}if(h.target.value="",f!==null&&(clearTimeout(f),f=null),m!==null&&(clearTimeout(m),m=null),Ge(),typeof _=="string"&&_.length!==0){const b=_.toLocaleLowerCase(),N=Q=>{const B=e.options.find(Y=>String(Q.value(Y)).toLocaleLowerCase()===b);return B===void 0?!1:(x.value.indexOf(B)===-1?Me(B):Re(),!0)},O=Q=>{N(ge)!==!0&&Q!==!0&&N(le)!==!0&&Xe(_,!0,()=>O(!0))};O()}else g.clearValue(h)}function Qn(h){n("keypress",h)}function Yn(h){if(n("keydown",h),Oo(h)===!0)return;const _=a.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),b=h.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(s.value!==-1||_===!0);if(h.keyCode===27){vt(h);return}if(h.keyCode===9&&b===!1){Ue();return}if(h.target===void 0||h.target.id!==g.targetUid.value||g.editable.value!==!0)return;if(h.keyCode===40&&g.innerLoading.value!==!0&&o.value===!1){xe(h),Ke();return}if(h.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&a.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ln(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(h.keyCode===35||h.keyCode===36)&&(typeof a.value!="string"||a.value.length===0)&&(xe(h),s.value=-1,Vt(h.keyCode===36?1:-1,e.multiple)),(h.keyCode===33||h.keyCode===34)&&ae.value!==void 0&&(xe(h),s.value=Math.max(-1,Math.min(D.value,s.value+(h.keyCode===33?-1:1)*ae.value.view)),Vt(h.keyCode===33?1:-1,e.multiple)),(h.keyCode===38||h.keyCode===40)&&(xe(h),Vt(h.keyCode===38?-1:1,e.multiple));const N=D.value;if((S===void 0||w<Date.now())&&(S=""),N>0&&e.useInput!==!0&&h.key!==void 0&&h.key.length===1&&h.altKey===!1&&h.ctrlKey===!1&&h.metaKey===!1&&(h.keyCode!==32||S.length!==0)){o.value!==!0&&Ke(h);const O=h.key.toLocaleLowerCase(),Q=S.length===1&&S[0]===O;w=Date.now()+1500,Q===!1&&(xe(h),S+=O);const B=new RegExp("^"+S.split("").map(Qe=>Tc.indexOf(Qe)!==-1?"\\"+Qe:Qe).join(".*"),"i");let Y=s.value;if(Q===!0||Y<0||B.test(le.value(e.options[Y]))!==!0)do Y=Or(Y+1,-1,N-1);while(Y!==s.value&&(Pe.value(e.options[Y])===!0||B.test(le.value(e.options[Y]))!==!0));s.value!==Y&&we(()=>{We(Y),me(Y),Y>=0&&e.useInput===!0&&e.fillInput===!0&&Tt(le.value(e.options[Y]),!0)});return}if(!(h.keyCode!==13&&(h.keyCode!==32||e.useInput===!0||S!=="")&&(h.keyCode!==9||b===!1))){if(h.keyCode!==9&&xe(h),s.value!==-1&&s.value<N){Me(e.options[s.value]);return}if(_===!0){const O=(Q,B)=>{var Qe;if(B){if(Br(B)!==!0)return}else B=e.newValueMode;if(st("",e.multiple!==!0,!0),Q==null)return;(B==="toggle"?Me:Xn)(Q,B==="add-unique"),e.multiple!==!0&&((Qe=M.value)==null||Qe.focus(),Re())};if(e.onNewValue!==void 0?n("newValue",a.value,O):O(a.value),e.multiple!==!0)return}o.value===!0?Ue():g.innerLoading.value!==!0&&Ke()}}function jn(){return v===!0?z.value:E.value!==null&&E.value.contentEl!==null?E.value.contentEl:void 0}function zi(){return jn()}function Hi(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?$e.value.map(h=>t["selected-item"](h)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?$e.value.map((h,_)=>T(cc,{key:"option-"+_,removable:g.editable.value===!0&&Pe.value(h.opt)!==!0,dense:!0,textColor:e.color,tabindex:ue.value,onRemove(){h.removeAtIndex(_)}},()=>T("span",{class:"ellipsis",[h.html===!0?"innerHTML":"textContent"]:le.value(h.opt)}))):[T("span",{class:"ellipsis",[De.value===!0?"innerHTML":"textContent"]:te.value})]}function Zn(){if(G.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:a.value}):void 0;const h=t.option!==void 0?t.option:b=>T(fc,{key:b.index,...b.itemProps},()=>T(dc,()=>T(hc,()=>T("span",{[b.html===!0?"innerHTML":"textContent"]:b.label}))));let _=ot("div",qt.value.map(h));return t["before-options"]!==void 0&&(_=t["before-options"]().concat(_)),Bo(t["after-options"],_)}function Oi(h,_){const b=_===!0?{...Ct.value,...g.splitAttrs.attributes.value}:void 0,N={ref:_===!0?M:void 0,key:"i_t",class:L.value,style:e.inputStyle,value:a.value!==void 0?a.value:"",type:"search",...b,id:_===!0?g.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":h===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ii.value};return h!==!0&&v===!0&&(Array.isArray(N.class)===!0?N.class=[...N.class,"no-pointer-events"]:N.class+=" no-pointer-events"),T("input",N)}function Jn(h){f!==null&&(clearTimeout(f),f=null),m!==null&&(clearTimeout(m),m=null),!(h&&h.target&&h.target.qComposing===!0)&&(Tt(h.target.value||""),k=!0,I=a.value,g.focused.value!==!0&&(v!==!0||u.value===!0)&&g.focus(),e.onFilter!==void 0&&(f=setTimeout(()=>{f=null,Xe(a.value)},e.inputDebounce)))}function Tt(h,_){a.value!==h&&(a.value=h,_===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",h):m=setTimeout(()=>{m=null,n("inputValue",h)},e.inputDebounce))}function st(h,_,b){k=b!==!0,e.useInput===!0&&(Tt(h,!0),(_===!0||b!==!0)&&(I=h),_!==!0&&Xe(h))}function Xe(h,_,b){if(e.onFilter===void 0||_!==!0&&g.focused.value!==!0)return;g.innerLoading.value===!0?n("filterAbort"):(g.innerLoading.value=!0,c.value=!0),h!==""&&e.multiple!==!0&&x.value.length!==0&&k!==!0&&h===le.value(x.value[0])&&(h="");const N=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);y!==null&&clearTimeout(y),y=N,n("filter",h,(O,Q)=>{(_===!0||g.focused.value===!0)&&y===N&&(clearTimeout(y),typeof O=="function"&&O(),c.value=!1,we(()=>{g.innerLoading.value=!1,g.editable.value===!0&&(_===!0?o.value===!0&&Re():o.value===!0?un(!0):o.value=!0),typeof Q=="function"&&we(()=>{Q(r)}),typeof b=="function"&&we(()=>{b(r)})}))},()=>{g.focused.value===!0&&y===N&&(clearTimeout(y),g.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function Bi(){return T(kc,{ref:E,class:V.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&G.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:H.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:an.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ee.value,onScrollPassive:ke,onBeforeShow:tr,onBeforeHide:Di,onShow:Pi},Zn)}function Di(h){nr(h),Ue()}function Pi(){Te()}function Wi(h){var _;Ye(h),(_=M.value)==null||_.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Xi(h){Ye(h),we(()=>{u.value=!1})}function Ui(){const h=[T(sc,{class:`col-auto ${g.fieldClass.value}`,...$.value,for:g.targetUid.value,dark:H.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:a.value.length!==0,...g.splitAttrs.listeners.value,onFocus:Wi,onBlur:Xi},{...t,rawControl:()=>g.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&h.push(T("div",{ref:z,class:V.value+" scroll",style:e.popupContentStyle,...Ee.value,onClick:vt,onScrollPassive:ke},Zn())),T(Rn,{ref:R,modelValue:l.value,position:e.useInput===!0?"top":void 0,transitionShow:F,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:tr,onBeforeHide:Ki,onHide:Gi,onShow:Qi},()=>T("div",{class:"q-select__dialog"+(H.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},h))}function Ki(h){nr(h),R.value!==null&&R.value.__updateRefocusTarget(g.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),g.focused.value=!1}function Gi(h){Re(),g.focused.value===!1&&n("blur",h),Ge()}function Qi(){const h=document.activeElement;(h===null||h.id!==g.targetUid.value)&&M.value!==null&&M.value!==h&&M.value.focus(),Te()}function Ue(){l.value!==!0&&(s.value=-1,o.value===!0&&(o.value=!1),g.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),g.innerLoading.value===!0&&(n("filterAbort"),g.innerLoading.value=!1,c.value=!1)))}function Ke(h){g.editable.value===!0&&(v===!0?(g.onControlFocusin(h),l.value=!0,we(()=>{g.focus()})):g.focus(),e.onFilter!==void 0?Xe(a.value):(G.value!==!0||t["no-option"]!==void 0)&&(o.value=!0))}function Re(){l.value=!1,Ue()}function Ge(){e.useInput===!0&&st(e.multiple!==!0&&e.fillInput===!0&&x.value.length!==0&&le.value(x.value[0])||"",!0,!0)}function un(h){let _=-1;if(h===!0){if(x.value.length!==0){const b=ge.value(x.value[0]);_=e.options.findIndex(N=>ut(ge.value(N),b))}ee(_)}We(_)}function Yi(h,_){o.value===!0&&g.innerLoading.value===!1&&(ee(-1,!0),we(()=>{o.value===!0&&g.innerLoading.value===!1&&(h>_?ee():un(!0))}))}function er(){l.value===!1&&E.value!==null&&E.value.updatePosition()}function tr(h){h!==void 0&&Ye(h),n("popupShow",h),g.hasPopupOpen=!0,g.onControlFocusin(h)}function nr(h){h!==void 0&&Ye(h),n("popupHide",h),g.hasPopupOpen=!1,g.onControlFocusout(h)}function rr(){v=i.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||G.value===!1:!0),F=i.platform.is.ios===!0&&v===!0&&e.useInput===!0?"fade":e.transitionShow}return Fo(rr),zo(er),rr(),bt(()=>{f!==null&&clearTimeout(f),m!==null&&clearTimeout(m)}),Object.assign(r,{showPopup:Ke,hidePopup:Re,removeAtIndex:ln,add:Xn,toggleOption:Me,getOptionIndex:()=>s.value,setOptionIndex:We,moveOptionSelection:Vt,filter:Xe,updateMenuPosition:er,updateInputValue:st,isOptionSelected:sn,getEmittingOptionValue:Wn,isOptionDisabled:(...h)=>Pe.value.apply(null,h)===!0,getOptionValue:(...h)=>ge.value.apply(null,h),getOptionLabel:(...h)=>le.value.apply(null,h)}),Object.assign(g,{innerValue:x,fieldClass:q(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:C,targetRef:M,hasValue:K,showPopup:Ke,floatingLabel:q(()=>e.hideSelected!==!0&&K.value===!0||typeof a.value=="number"||a.value.length!==0||lr(e.displayValue)),getControlChild:()=>{if(g.editable.value!==!1&&(l.value===!0||G.value!==!0||t["no-option"]!==void 0))return v===!0?Ui():Bi();g.hasPopupOpen===!0&&(g.hasPopupOpen=!1)},controlEvents:{onFocusin(h){g.onControlFocusin(h)},onFocusout(h){g.onControlFocusout(h,()=>{Ge(),Ue()})},onClick(h){var _;if(vt(h),v!==!0&&o.value===!0){Ue(),(_=M.value)==null||_.focus();return}Ke(h)}},getControl:h=>{const _=Hi(),b=h===!0||l.value!==!0||v!==!0;if(e.useInput===!0)_.push(Oi(h,b));else if(g.editable.value===!0){const O=b===!0?Ct.value:void 0;_.push(T("input",{ref:b===!0?M:void 0,key:"d_t",class:"q-select__focus-target",id:b===!0?g.targetUid.value:void 0,value:te.value,readonly:!0,"data-autofocus":h===!0||e.autofocus===!0||void 0,...O,onKeydown:Yn,onKeyup:Kn,onKeypress:Qn})),b===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&_.push(T("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Gn}))}if(U.value!==void 0&&e.disable!==!0&&At.value.length!==0){const O=At.value.map(Q=>T("option",{value:Q,selected:!0}));_.push(T("select",{class:"hidden",name:U.value,multiple:e.multiple},O))}const N=e.useInput===!0||b!==!0?void 0:g.splitAttrs.attributes.value;return T("div",{class:"q-field__native row items-center",...N,...g.splitAttrs.listeners.value},_)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[T(zt,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:at.value})]:null}),Wr(g)}});const Mc=en({name:"LudoNewGameDialog",emits:["launch_game"],data(){return{dialog_visible:!0,players:[],slot_mode_options:[{label:"Empty",value:"empty"},{label:"Human",value:"human"},{label:"Computer",value:"computer"}],tabletop_mode:!1,use_large_selectors:!0}},computed:{isDisabled(){return this.num_players<2},computer_types(){return Object.keys(et.computer_types).map(function(e){const t=et.computer_types[e];return{value:t.id,label:t.name}})},num_players(){return this.players.filter(function(e){return e.slot_mode!=="empty"}).length},btn_text(){return this.isDisabled?"Need at least 2 players":"Start "+this.num_players.toString()+" player game"}},methods:{launch_dialog(e,t,n){const r=this;this.tabletop_mode=!1,this.use_large_selectors=!0,this.players=Object.keys(A.players).map(function(i){const o=A.players[i];var l="empty";return o.id==="1"&&(l="human"),o.id==="3"&&(l="computer"),{id:o.id,slot_mode:l,colour:o.colour,human_name:o.name,human_gf_mode:!1,computer_type:"random",computer_mistake_chance:"50"}}),typeof e!="undefined"&&(this.tabletop_mode=e),typeof t!="undefined"&&(this.use_large_selectors=t),typeof n!="undefined"&&n.forEach(function(i){let o=-1;r.players.forEach(function(l,s){l.id===i.id&&(o=s)}),o===-1&&(console.log("ERROR!!!! not round "),o=0),r.players[o].slot_mode=i.slot_mode,r.players[o].human_name=i.human_name,r.players[o].human_gf_mode=i.human_gf_mode,r.players[o].computer_type=i.computer_type,r.players[o].computer_mistake_chance=i.computer_mistake_chance}),this.dialog_visible=!0},launch_game(){const e={players:this.players,tabletop_mode:this.tabletop_mode,use_large_selectors:this.use_large_selectors};this.dialog_visible=!1,this.$emit("launch_game",e)},helpgfmode(){this.$q.dialog({title:"Girlfriend Mode",message:"When playing with your girlfriend she gets angry when the dice doesn\u2019t give her the number she wants. Use this mode for your girlfriend to allow her to select from two possible results for each dice throw. This will reduce the chance she will be angry with you.",html:!0}).onOk(()=>{})},helpmistagechance(){this.$q.dialog({title:"Computer Mistake Chance",message:"The chance that the computer player will forget to evaluate one of its possible moves.",html:!0}).onOk(()=>{})}},mounted(){this.launch_dialog()}}),Rc={key:0},Nc={class:"row"},Ic={key:1},Lc={class:"row"};function Fc(e,t,n,r,i,o){return qe(),Nn(Rn,{modelValue:e.dialog_visible,"onUpdate:modelValue":t[2]||(t[2]=l=>e.dialog_visible=l)},{default:fe(()=>[P(Gr,null,{default:fe(()=>[P(Dt,{class:"row items-center q-pb-none"},{default:fe(()=>t[3]||(t[3]=[Ae("div",{class:"text-h6"},"Start new game",-1)])),_:1}),P(Dt,null,{default:fe(()=>[(qe(!0),dt(Ur,null,Do(e.players,l=>(qe(),dt("div",{key:l.id},[Ae("div",{style:Po("background: "+l.colour+";"),class:"newgamedialog-playoptbox"},[P(Wo,{inline:"",modelValue:l.slot_mode,"onUpdate:modelValue":s=>l.slot_mode=s,options:e.slot_mode_options,color:"primary"},null,8,["modelValue","onUpdate:modelValue","options"]),l.slot_mode==="human"?(qe(),dt("div",Rc,[Ae("div",Nc,[t[4]||(t[4]=sr(" Name: ")),P(ur,{filled:"",modelValue:l.human_name,"onUpdate:modelValue":s=>l.human_name=s,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),Ae("div",null,[P(gt,{modelValue:l.human_gf_mode,"onUpdate:modelValue":s=>l.human_gf_mode=s,label:"Girlfriend mode"},null,8,["modelValue","onUpdate:modelValue"]),P(pt,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpgfmode},null,8,["onClick"])])])):cr("",!0),l.slot_mode==="computer"?(qe(),dt("div",Ic,[P($c,{modelValue:l.computer_type,"onUpdate:modelValue":s=>l.computer_type=s,options:e.computer_types,label:"Type","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options"]),Ae("div",Lc,[t[5]||(t[5]=sr(" Mistake Chance: ")),P(ur,{modelValue:l.computer_mistake_chance,"onUpdate:modelValue":s=>l.computer_mistake_chance=s,modelModifiers:{number:!0},type:"number",filled:"",style:{"max-width":"100px"},dense:"",min:"0",max:"100",step:"5"},null,8,["modelValue","onUpdate:modelValue"]),P(pt,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpmistagechance},null,8,["onClick"])])])):cr("",!0)],4)]))),128)),P(gt,{modelValue:e.tabletop_mode,"onUpdate:modelValue":t[0]||(t[0]=l=>e.tabletop_mode=l),label:"Tabletop Mode"},null,8,["modelValue"]),P(gt,{modelValue:e.use_large_selectors,"onUpdate:modelValue":t[1]||(t[1]=l=>e.use_large_selectors=l),label:"Large Selectors"},null,8,["modelValue"]),P(Kr,{align:"right",class:"text-primary"},{default:fe(()=>[P(pt,{color:"primary",label:e.btn_text,onClick:e.launch_game,disable:e.isDisabled},null,8,["label","onClick","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var zc=tn(Mc,[["render",Fc]]);function Dr(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Hc=Xo({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Dr(t),handler(r){n.depth!==0&&setTimeout(()=>{const i=Uo(e);i!==void 0&&Ko(i,r,n.depth)})},handlerKey(r){Jt(r,13)===!0&&n.handler(r)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Dr(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const Oc=en({name:"LudoSettingsDialog",emits:["restart_game","toggle_tabletop_mode","toggle_large_selectors"],data(){return{dialog_visible:!1,tabletop_mode:!1,use_large_selectors:!1}},computed:{},methods:{toggle_tabletop_mode(){this.$emit("toggle_tabletop_mode",this.tabletop_mode)},toggle_large_selectors(){this.$emit("toggle_large_selectors",this.use_large_selectors)},launch_dialog(e,t){this.tabletop_mode=e,this.use_large_selectors=t,this.dialog_visible=!0},restart_game(){this.dialog_visible=!1,this.$emit("restart_game",void 0)}},mounted(){}});function Bc(e,t,n,r,i,o){return qe(),Nn(Rn,{modelValue:e.dialog_visible,"onUpdate:modelValue":t[2]||(t[2]=l=>e.dialog_visible=l)},{default:fe(()=>[P(Gr,null,{default:fe(()=>[P(Dt,{class:"row items-center q-pb-none"},{default:fe(()=>t[3]||(t[3]=[Ae("div",{class:"text-h6"},"Ludo Settings",-1)])),_:1}),P(Dt,null,{default:fe(()=>[P(gt,{modelValue:e.tabletop_mode,"onUpdate:modelValue":t[0]||(t[0]=l=>e.tabletop_mode=l),label:"Tabletop Mode",onClick:e.toggle_tabletop_mode},null,8,["modelValue","onClick"]),P(gt,{modelValue:e.use_large_selectors,"onUpdate:modelValue":t[1]||(t[1]=l=>e.use_large_selectors=l),label:"Use Large Selectors",onClick:e.toggle_large_selectors},null,8,["modelValue","onClick"]),P(Kr,{align:"right",class:"text-primary"},{default:fe(()=>[Go(P(pt,{color:"secondary",label:"Close"},null,512),[[Hc]]),P(pt,{color:"primary",label:"New Game",onClick:e.restart_game},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Dc=tn(Oc,[["render",Bc]]);const Pc=!1;function Wc(e){const t=e.split(/([A-Za-z])/).filter(function(s){return!isNaN(s)&&s!==""}).map(function(s){return parseInt(s)});for(var n={},r=10;r<t.length;r=r+2)n[r/2-5]={next:t[r-10],val:t[r+1]};for(var i=t[0]+1,o=0,l=-1;i>0;)l=n[o].val,o=n[o].next,i--;return l}const Xc=en({name:"LudoGame",components:{NewGameDialog:zc,SettingsDialog:Dc},data(){return{svg:void 0,current_state:"new_game_dialog",game_state:{},clickable_ids:[],possible_moves:{},max_dice:6,gf_rerole_done:!1}},methods:{toggle_tabletop_mode(e){this.game_state.tabletop_mode=e,re.setup_tabletop_mode(this.game_state.tabletop_mode)},toggle_large_selectors(e){this.game_state.use_large_selectors=e},launch_settings_dialog(){this.$refs.SettingsDialog.launch_dialog(this.game_state.tabletop_mode,this.game_state.use_large_selectors)},restart_game(){const e=this;this.$q.dialog({title:"Restart game",message:"Are you sure you want to lose this game?",html:!1,ok:{push:!0,label:"Start new game",color:"primary"},cancel:{push:!0,label:"Cancel",color:"secondary"}}).onOk(t=>{e.current_state="new_game_dialog",e.$refs.NewGameDialog.launch_dialog(e.game_state.tabletop_mode,e.game_state.use_large_selectors,e.game_state.players.map(function(n){return{id:n.id,slot_mode:n.slot_mode,human_name:n.name,human_gf_mode:n.human_gf_mode,computer_type:n.computer_type,computer_mistake_chance:n.computer_mistake_chance}}))})},launch_game(e){this.game_state=je.setup_new_game_from_opts(e),this.gf_rerole_done=!1,this.possible_moves={},this.clickable_ids=[],re.setup_board_for_new_game(this.game_state),this.enter_state_wait_roll()},clickDIV(){console.log("CLICK DIV")},clickBoardItem(e){!this.clickable_ids.includes(e)||(re.show_clickable_items(this.clickable_ids,!1,!1,void 0,"",this.game_state.tabletop_mode,this.game_state.use_large_selectors),this.clickable_ids=[],this.clickBoardItem_internal(e))},clickBoardItem_internal(e){const t=this.game_state.players[this.game_state.current_player],n="p"+t.id+"dice";if(this.current_state==="wait_roll"&&(this.game_state.players[this.game_state.current_player],e===n)){this.enter_state_rolling();return}if(this.current_state==="choose_move"){if(re.set_gf_mode(t.id,!1),e===n){this.gf_rerole_done=!0,this.possible_moves={},this.clickable_ids=[],this.enter_state_rolling();return}if(Object.keys(this.possible_moves).includes(e)){this.enter_state_animating(this.possible_moves[e]);return}}},initChart(){for(var e=document.getElementById("gameInsetionPoint_adsddsa");e.firstChild;)console.log("Removing old SVG"),e.removeChild(e.firstChild);e.appendChild(zu(this,Pc))},enter_state_wait_roll(){this.current_state="wait_roll";const e=je.get_unfinsihed_player_obj_list(this.game_state);if(e.length===1){this.game_state.finishers.push(e[0].id),re.show_player_finished(e[0].id,this.game_state.finishers.length-1),this.enter_state_game_results();return}this.possible_moves={},re.get_ready_for_roll(this.game_state);const t=this.game_state.players[this.game_state.current_player];re.set_player_turn(t.id,!0);const n="p"+t.id+"dice";if(t.slot_mode!=="computer"&&(this.clickable_ids=[n],re.show_clickable_items(this.clickable_ids,!0,!0,this.clickBoardItem,t.id,this.game_state.tabletop_mode,this.game_state.use_large_selectors)),t.slot_mode==="computer"){const r=this;setTimeout(function(){r.clickBoardItem_internal(n)},et.computer_waits.before_roll_dice)}},enter_state_rolling(){const e=this;this.current_state="rolling";const t=this.game_state.players[this.game_state.current_player],n=Date.now(),r=function(i){if(e.current_state!=="rolling")return;let o=A.blank_dice_image_num;for(;o===A.blank_dice_image_num;)o=Math.floor(Math.random()*A.number_of_dice_images)+1;re.display_dice_image(t.id,o);let l=!0;Date.now()-n>400&&o<e.max_dice&&(l=!1),l?setTimeout(function(){i(i)},50):e.enter_state_choose_move(o)};r(r)},enter_state_choose_move(e){const t=this;if(this.current_state="choose_move",t.possible_moves=je.caculate_possible_moves(this.game_state,e),Object.keys(t.possible_moves).length===0){const r=this.game_state.players[this.game_state.current_player];re.set_player_turn(r.id,!1),je.next_player(this.game_state),this.gf_rerole_done=!1,this.enter_state_wait_roll();return}const n=this.game_state.players[this.game_state.current_player];if(n.slot_mode!=="computer"){if(this.clickable_ids=Object.keys(t.possible_moves).map(function(r){return t.possible_moves[r].squareToMoveFrom}),n.human_gf_mode&&Object.keys(t.possible_moves).filter(function(i){return!je.isStartSquare(i)}).length>0&&!t.gf_rerole_done){const i="p"+n.id+"dice";re.set_gf_mode(n.id,!0),t.clickable_ids.push(i)}re.show_clickable_items(this.clickable_ids,!0,!1,this.clickBoardItem,n.id,this.game_state.tabletop_mode,this.game_state.use_large_selectors)}n.slot_mode==="computer"&&setTimeout(function(){t.clickBoardItem_internal(et.get_computer_move(n,t.game_state,t.possible_moves))},et.computer_waits.before_move)},enter_state_animating(e){var t=this;this.current_state="animating";const n=this.game_state.players[this.game_state.current_player];function r(){n.finished&&(t.game_state.finishers.includes(n.id)||(t.game_state.finishers.push(n.id),re.show_player_finished(n.id,t.game_state.finishers.length-1))),(n.finished||!e.getAnotherGo)&&(re.set_player_turn(n.id,!1),je.next_player(t.game_state),t.gf_rerole_done=!1),t.enter_state_wait_roll()}e.execute_move(t.game_state),re.animate_move(e,r,t.game_state)},enter_state_game_results(){this.current_state="game_results",console.log("Game over display results not implemented")}},mounted(){this.initChart();var e=this;Qo({method:"get",url:"https://api.metcarob.com/property_backend/v0/public/api/infoutility/info"}).then(function(t){e.max_dice=Wc(t.data)}).catch(function(t){console.log("Failed",t)})},unmounted(){}}),Uc={class:"ludo-pagediv"};function Kc(e,t,n,r,i,o){const l=_n("NewGameDialog"),s=_n("SettingsDialog");return qe(),dt(Ur,null,[Ae("div",Uc,[Ae("div",{id:"gameInsetionPoint_adsddsa",class:"ludo-gamediv",onClick:t[0]||(t[0]=a=>e.clickDIV(a))})]),P(l,{ref:"NewGameDialog",onLaunch_game:e.launch_game},null,8,["onLaunch_game"]),P(s,{ref:"SettingsDialog",onRestart_game:e.restart_game,onToggle_tabletop_mode:e.toggle_tabletop_mode,onToggle_large_selectors:e.toggle_large_selectors},null,8,["onRestart_game","onToggle_tabletop_mode","onToggle_large_selectors"])],64)}var Gc=tn(Xc,[["render",Kc]]);const Qc=en({name:"LudoPage",components:{LudoGame:Gc}});function Yc(e,t,n,r,i,o){const l=_n("LudoGame");return qe(),Nn(ji,{class:"flex flex-center ludopage"},{default:fe(()=>[P(l)]),_:1})}var ef=tn(Qc,[["render",Yc]]);export{ef as default};
